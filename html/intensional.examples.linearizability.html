<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">intensional.examples.linearizability</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.tactics.html#"><span class="id" title="library">tactics</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.algebra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#"><span class="id" title="library">auth</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.excl.html#"><span class="id" title="library">excl</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#"><span class="id" title="library">excl_auth</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.gmap.html#"><span class="id" title="library">gmap</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic.lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.invariants.html#"><span class="id" title="library">invariants</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#"><span class="id" title="library">atomic</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">intensional.heap_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="intensional.heap_lang.lifting.html#"><span class="id" title="library">lifting</span></a> <a class="idref" href="intensional.heap_lang.proofmode.html#"><span class="id" title="library">proofmode</span></a> <a class="idref" href="intensional.heap_lang.notation.html#"><span class="id" title="library">notation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">intensional.heap_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="intensional.heap_lang.adequacy.html#"><span class="id" title="library">adequacy</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">intensional.examples</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="intensional.examples.stdpp_extra.html#"><span class="id" title="library">stdpp_extra</span></a> <a class="idref" href="intensional.examples.iris_extra.html#"><span class="id" title="library">iris_extra</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#"><span class="id" title="library">trace_helpers</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type".<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">t</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab26"></a><h2 class="section">A concurrent specification using logically atomic triples (Section 6)</h2>

<div class="paragraph"> </div>

<a id="lab27"></a><h3 class="section">Separation logic specification</h3>

<div class="paragraph"> </div>

 The Separation Logic specification is parameterized by:
<ul class="doclist">
<li> a mathematical model of the data structure (<span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#model"><span class="id" title="record">model</span></a></span> below)

</li>
<li> two Separation Logic representation predicates <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#is_P"><span class="id" title="projection">is_P</span></a></span> and <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#P_state"><span class="id" title="projection">P_state</span></a></span> (<span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#repr"><span class="id" title="record">repr</span></a></span> below).
<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#is_P"><span class="id" title="projection">is_P</span></a></span> <span class="inlinecode"><span class="id" title="var">γ</span></span> <span class="inlinecode"><span class="id" title="var">v</span></span> asserts that the value <span class="inlinecode"><span class="id" title="var">v</span></span> is a valid instance of the
        structure, associated with the logical name <span class="inlinecode"><span class="id" title="var">γ</span></span>. It is a persistent
        assertion. (It is named <span class="inlinecode"><span class="id" title="var">IsP</span></span> in the paper.)

</li>
<li> <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#P_state"><span class="id" title="projection">P_state</span></a></span> <span class="inlinecode"><span class="id" title="var">γ</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> asserts that the current state of the data structure
        with ghost name <span class="inlinecode"><span class="id" title="var">γ</span></span> is <span class="inlinecode"><span class="id" title="var">s</span></span>. It is not a persistent assertion as it
        allows updating the state of the structure with operation <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#Wrap.op"><span class="id" title="definition">op</span></a></span>.
        (It is named <span class="inlinecode"><span class="id" title="var">PState</span></span> in the paper.)

</li>
</ul>

</li>
</ul>

<div class="paragraph"> </div>

<a id="lab28"></a><h3 class="section"> </h3>

<div class="paragraph"> </div>

 The mathematical model of a data structure exposing a single operation,
   where:
<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#f"><span class="id" title="projection">f</span></a></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="var">s'</span></span> specifies that calling the operation on a structure at state <span class="inlinecode"><span class="id" title="var">s</span></span>
     with argument <span class="inlinecode"><span class="id" title="var">v</span></span> results in an updated state <span class="inlinecode"><span class="id" title="var">s'</span></span>;

</li>
<li> <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#r"><span class="id" title="projection">r</span></a></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="var">v'</span></span> specifies that calling the operation on a structure at state <span class="inlinecode"><span class="id" title="var">s</span></span>
     with argument <span class="inlinecode"><span class="id" title="var">v</span></span> produces a result value <span class="inlinecode"><span class="id" title="var">v'</span></span>. 
</li>
</ul>
 <i>NOTE</i>: <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#f"><span class="id" title="projection">f</span></a></span> and <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#r"><span class="id" title="projection">r</span></a></span> are here taken to be relations, whereas they are functions
   in the paper. This is a small generalization that has otherwise no impact on
   the proof. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="model" class="idref" href="#model"><span class="id" title="record">model</span></a> := {<br/>
&nbsp;&nbsp;<a id="S" class="idref" href="#S"><span class="id" title="projection">S</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;<a id="s_init" class="idref" href="#s_init"><span class="id" title="projection">s_init</span></a> : <a class="idref" href="intensional.examples.linearizability.html#S:2"><span class="id" title="method">S</span></a>;<br/>
&nbsp;&nbsp;<a id="f" class="idref" href="#f"><span class="id" title="projection">f</span></a> : <a class="idref" href="intensional.examples.linearizability.html#S:2"><span class="id" title="method">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.examples.linearizability.html#S:2"><span class="id" title="method">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>;<br/>
&nbsp;&nbsp;<a id="r" class="idref" href="#r"><span class="id" title="projection">r</span></a> : <a class="idref" href="intensional.examples.linearizability.html#S:2"><span class="id" title="method">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>;<br/>
}.<br/>

<br/>
</div>

<div class="doc">
The representation predicates <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#is_P"><span class="id" title="projection">is_P</span></a></span> and <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#P_state"><span class="id" title="projection">P_state</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a id="repr" class="idref" href="#repr"><span class="id" title="record">repr</span></a> {<a id="f525610baade8c1419220d275a93fff0" class="idref" href="#f525610baade8c1419220d275a93fff0"><span class="id" title="binder">Σ</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="definition">gFunctors</span></a>} `{<a id="H:7" class="idref" href="#H:7"><span class="id" title="binder">model</span></a>} := {<br/>
&nbsp;&nbsp;<a id="is_P" class="idref" href="#is_P"><span class="id" title="projection">is_P</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#f525610baade8c1419220d275a93fff0"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="P_state" class="idref" href="#P_state"><span class="id" title="projection">P_state</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.examples.linearizability.html#S"><span class="id" title="method">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#f525610baade8c1419220d275a93fff0"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="is_P_persistent" class="idref" href="#is_P_persistent"><span class="id" title="projection">is_P_persistent</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="ffabb5326d6c3c3378c3a8b7fee7ec6d" class="idref" href="#ffabb5326d6c3c3378c3a8b7fee7ec6d"><span class="id" title="binder">γ</span></a> <a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#Persistent"><span class="id" title="class">Persistent</span></a> (<a class="idref" href="intensional.examples.linearizability.html#is_P:9"><span class="id" title="method">is_P</span></a> <a class="idref" href="intensional.examples.linearizability.html#ffabb5326d6c3c3378c3a8b7fee7ec6d"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#x:12"><span class="id" title="variable">x</span></a>);<br/>
}.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="intensional.examples.linearizability.html#repr"><span class="id" title="record">repr</span></a> <span class="id" title="var">Σ</span> {<span class="id" title="var">_</span>}.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">is_P_persistent</span> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Specs" class="idref" href="#Specs"><span class="id" title="section">Specs</span></a>.<br/>
<span class="id" title="keyword">Context</span> `{<a id="heapG0:15" class="idref" href="#heapG0:15"><span class="id" title="binder">!</span></a><a id="heapG0:15" class="idref" href="#heapG0:15"><span class="id" title="binder">heapG</span></a> <a id="heapG0:15" class="idref" href="#heapG0:15"><span class="id" title="binder">Σ</span></a>}.<br/>
<span class="id" title="keyword">Context</span> `{<a id="H:16" class="idref" href="#H:16"><span class="id" title="binder">model</span></a>} (<a id="R:17" class="idref" href="#R:17"><span class="id" title="binder">R</span></a>: <a class="idref" href="intensional.examples.linearizability.html#repr"><span class="id" title="record">repr</span></a> <a class="idref" href="intensional.examples.linearizability.html#b09ba4300979408ba415fc775058a144"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Context</span> (<a id="E:18" class="idref" href="#E:18"><span class="id" title="binder">E</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="init_spec" class="idref" href="#init_spec"><span class="id" title="definition">init_spec</span></a> <a id="P0:19" class="idref" href="#P0:19"><span class="id" title="binder">P0</span></a> (<a id="init:20" class="idref" href="#init:20"><span class="id" title="binder">init</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#b09ba4300979408ba415fc775058a144"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a> <a class="idref" href="intensional.examples.linearizability.html#P0:19"><span class="id" title="variable">P0</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a> <a class="idref" href="intensional.examples.linearizability.html#init:20"><span class="id" title="variable">init</span></a> <a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a> <a id="cf6aa9dd96fbb1b0b51132ecb076c581" class="idref" href="#cf6aa9dd96fbb1b0b51132ecb076c581"><span class="id" title="binder">γ</span></a> <a id="r:22" class="idref" href="#r:22"><span class="id" title="binder">r</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">RET</span></a> <a class="idref" href="intensional.examples.linearizability.html#r:22"><span class="id" title="variable">r</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">;</span></a> <a class="idref" href="intensional.examples.linearizability.html#is_P"><span class="id" title="projection">is_P</span></a> <a class="idref" href="intensional.examples.linearizability.html#Specs.R"><span class="id" title="variable">R</span></a> <a class="idref" href="intensional.examples.linearizability.html#cf6aa9dd96fbb1b0b51132ecb076c581"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#r:22"><span class="id" title="variable">r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="intensional.examples.linearizability.html#P_state"><span class="id" title="projection">P_state</span></a> <a class="idref" href="intensional.examples.linearizability.html#Specs.R"><span class="id" title="variable">R</span></a> <a class="idref" href="intensional.examples.linearizability.html#cf6aa9dd96fbb1b0b51132ecb076c581"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#s_init"><span class="id" title="method">s_init</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a>.<br/>

<br/>
</div>

<div class="doc">
The specification for the concurrent operation <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#Wrap.op"><span class="id" title="definition">op</span></a></span>. <span class="inlinecode">&lt;&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">&gt;&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">&lt;&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">&gt;&gt;&gt;</span>
    denotes a logically atomic triple. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="op_spec" class="idref" href="#op_spec"><span class="id" title="definition">op_spec</span></a> (<a id="op:23" class="idref" href="#op:23"><span class="id" title="binder">op</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#b09ba4300979408ba415fc775058a144"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="33b907111abcf58bde2f69dd57e7406e" class="idref" href="#33b907111abcf58bde2f69dd57e7406e"><span class="id" title="binder">γ</span></a> (<a id="x:25" class="idref" href="#x:25"><span class="id" title="binder">x</span></a> <a id="y:26" class="idref" href="#y:26"><span class="id" title="binder">y</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#is_P"><span class="id" title="projection">is_P</span></a> <a class="idref" href="intensional.examples.linearizability.html#Specs.R"><span class="id" title="variable">R</span></a> <a class="idref" href="intensional.examples.linearizability.html#33b907111abcf58bde2f69dd57e7406e"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#x:25"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">∀</span></a> <a id="s:43" class="idref" href="#s:43"><span class="id" title="binder">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#P_state"><span class="id" title="projection">P_state</span></a> <a class="idref" href="intensional.examples.linearizability.html#Specs.R"><span class="id" title="variable">R</span></a> <a class="idref" href="intensional.examples.linearizability.html#33b907111abcf58bde2f69dd57e7406e"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:30"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">&gt;&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#op:23"><span class="id" title="variable">op</span></a> <a class="idref" href="intensional.examples.linearizability.html#x:25"><span class="id" title="variable">x</span></a> <a class="idref" href="intensional.examples.linearizability.html#y:26"><span class="id" title="variable">y</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a><a class="idref" href="intensional.examples.linearizability.html#Specs.E"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">∃</span></a> <a id="s':41" class="idref" href="#s':41"><span class="id" title="binder">s'</span></a> <a id="y':42" class="idref" href="#y':42"><span class="id" title="binder">y'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#P_state"><span class="id" title="projection">P_state</span></a> <a class="idref" href="intensional.examples.linearizability.html#Specs.R"><span class="id" title="variable">R</span></a> <a class="idref" href="intensional.examples.linearizability.html#33b907111abcf58bde2f69dd57e7406e"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':35"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#f"><span class="id" title="method">f</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:32"><span class="id" title="variable">s</span></a> <a class="idref" href="intensional.examples.linearizability.html#y:26"><span class="id" title="variable">y</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':35"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="intensional.examples.linearizability.html#r"><span class="id" title="method">r</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:32"><span class="id" title="variable">s</span></a> <a class="idref" href="intensional.examples.linearizability.html#y:26"><span class="id" title="variable">y</span></a> <a class="idref" href="intensional.examples.linearizability.html#y':36"><span class="id" title="variable">y'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">RET</span></a> <a class="idref" href="intensional.examples.linearizability.html#y':42"><span class="id" title="variable">y'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.atomic.html#99da8d06409bc857c042b0f5c095c398"><span class="id" title="notation">&gt;&gt;&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="intensional.examples.linearizability.html#Specs"><span class="id" title="section">Specs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lib_spec" class="idref" href="#lib_spec"><span class="id" title="definition">lib_spec</span></a> `{<a id="H:44" class="idref" href="#H:44"><span class="id" title="binder">model</span></a>} (<a id="E:45" class="idref" href="#E:45"><span class="id" title="binder">E</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) `{<a id="heapG0:47" class="idref" href="#heapG0:47"><span class="id" title="binder">!</span></a><a id="heapG0:47" class="idref" href="#heapG0:47"><span class="id" title="binder">heapG</span></a> <a id="heapG0:47" class="idref" href="#heapG0:47"><span class="id" title="binder">Σ</span></a>} (<a id="P0:48" class="idref" href="#P0:48"><span class="id" title="binder">P0</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#f850f5b668e843742fbd7a0a15104996"><span class="id" title="variable">Σ</span></a>) (<a id="lib:49" class="idref" href="#lib:49"><span class="id" title="binder">lib</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#f850f5b668e843742fbd7a0a15104996"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><a id="R:50" class="idref" href="#R:50"><span class="id" title="binder">R</span></a>: <a class="idref" href="intensional.examples.linearizability.html#repr"><span class="id" title="record">repr</span></a> <a class="idref" href="intensional.examples.linearizability.html#f850f5b668e843742fbd7a0a15104996"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="intensional.examples.linearizability.html#lib:49"><span class="id" title="variable">lib</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><span class="id" title="var">init</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">op</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a>%<span class="id" title="var">V</span> =&gt; <a class="idref" href="intensional.examples.linearizability.html#init_spec"><span class="id" title="definition">init_spec</span></a> <a class="idref" href="intensional.examples.linearizability.html#R:50"><span class="id" title="variable">R</span></a> <a class="idref" href="intensional.examples.linearizability.html#P0:48"><span class="id" title="variable">P0</span></a> <span class="id" title="var">init</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="intensional.examples.linearizability.html#op_spec"><span class="id" title="definition">op_spec</span></a> <a class="idref" href="intensional.examples.linearizability.html#R:50"><span class="id" title="variable">R</span></a> <a class="idref" href="intensional.examples.linearizability.html#E:45"><span class="id" title="variable">E</span></a> <span class="id" title="var">op</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'False'"><span class="id" title="notation">False</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab29"></a><h3 class="section">The trace property <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a></span>: "concurrent calls to <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#Wrap.op"><span class="id" title="definition">op</span></a></span> are linearizable"</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="Trace" class="idref" href="#Trace"><span class="id" title="section">Trace</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="linearization_trace" class="idref" href="#linearization_trace"><span class="id" title="inductive">linearization_trace</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="linearization_trace_nil" class="idref" href="#linearization_trace_nil"><span class="id" title="constructor">linearization_trace_nil</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearization_trace:52"><span class="id" title="inductive">linearization_trace</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <a id="linearization_trace_call" class="idref" href="#linearization_trace_call"><span class="id" title="constructor">linearization_trace_call</span></a> (<a id="tag:54" class="idref" href="#tag:54"><span class="id" title="binder">tag</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="v:55" class="idref" href="#v:55"><span class="id" title="binder">v</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) <a id="t:56" class="idref" href="#t:56"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearization_trace:52"><span class="id" title="inductive">linearization_trace</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:56"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearization_trace:52"><span class="id" title="inductive">linearization_trace</span></a> (<a class="idref" href="intensional.examples.linearizability.html#t:56"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:54"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:55"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;| <a id="linearization_trace_lin" class="idref" href="#linearization_trace_lin"><span class="id" title="constructor">linearization_trace_lin</span></a> (<a id="tag:57" class="idref" href="#tag:57"><span class="id" title="binder">tag</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="v:58" class="idref" href="#v:58"><span class="id" title="binder">v</span></a> <a id="v':59" class="idref" href="#v':59"><span class="id" title="binder">v'</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) <a id="t:60" class="idref" href="#t:60"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearization_trace:52"><span class="id" title="inductive">linearization_trace</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:60"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearization_trace:52"><span class="id" title="inductive">linearization_trace</span></a> (<a class="idref" href="intensional.examples.linearizability.html#t:60"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:57"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:58"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':59"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;| <a id="linearization_trace_ret" class="idref" href="#linearization_trace_ret"><span class="id" title="constructor">linearization_trace_ret</span></a> (<a id="tag:61" class="idref" href="#tag:61"><span class="id" title="binder">tag</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="v:62" class="idref" href="#v:62"><span class="id" title="binder">v</span></a> <a id="v':63" class="idref" href="#v':63"><span class="id" title="binder">v'</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) <a id="t:64" class="idref" href="#t:64"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearization_trace:52"><span class="id" title="inductive">linearization_trace</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:64"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearization_trace:52"><span class="id" title="inductive">linearization_trace</span></a> (<a class="idref" href="intensional.examples.linearizability.html#t:64"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:61"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:62"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':63"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>

<br/>
<span class="comment">(*&nbsp;whether&nbsp;lin&nbsp;events&nbsp;are&nbsp;sound&nbsp;wrt&nbsp;the&nbsp;model&nbsp;*)</span><br/>
<span class="id" title="keyword">Inductive</span> <a id="linearized_sound" class="idref" href="#linearized_sound"><span class="id" title="inductive">linearized_sound</span></a> `{<a id="H:65" class="idref" href="#H:65"><span class="id" title="binder">model</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.examples.linearizability.html#S"><span class="id" title="method">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.examples.linearizability.html#S"><span class="id" title="method">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="linearized_sound_nil" class="idref" href="#linearized_sound_nil"><span class="id" title="constructor">linearized_sound_nil</span></a> <a id="s:68" class="idref" href="#s:68"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearized_sound:66"><span class="id" title="inductive">linearized_sound</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:68"><span class="id" title="variable">s</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:68"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;| <a id="linearized_sound_lin" class="idref" href="#linearized_sound_lin"><span class="id" title="constructor">linearized_sound_lin</span></a> <a id="s0:69" class="idref" href="#s0:69"><span class="id" title="binder">s0</span></a> <a id="s:70" class="idref" href="#s:70"><span class="id" title="binder">s</span></a> <a id="s':71" class="idref" href="#s':71"><span class="id" title="binder">s'</span></a> (<a id="tag:72" class="idref" href="#tag:72"><span class="id" title="binder">tag</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a id="v:73" class="idref" href="#v:73"><span class="id" title="binder">v</span></a> <a id="v':74" class="idref" href="#v':74"><span class="id" title="binder">v'</span></a> <a id="t:75" class="idref" href="#t:75"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearized_sound:66"><span class="id" title="inductive">linearized_sound</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:75"><span class="id" title="variable">t</span></a> <a class="idref" href="intensional.examples.linearizability.html#s0:69"><span class="id" title="variable">s0</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:70"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#r"><span class="id" title="method">r</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:70"><span class="id" title="variable">s</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:73"><span class="id" title="variable">v</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':74"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#f"><span class="id" title="method">f</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:70"><span class="id" title="variable">s</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:73"><span class="id" title="variable">v</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':71"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearized_sound:66"><span class="id" title="inductive">linearized_sound</span></a> (<a class="idref" href="intensional.examples.linearizability.html#t:75"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:72"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:73"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':74"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="intensional.examples.linearizability.html#s0:69"><span class="id" title="variable">s0</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':71"><span class="id" title="variable">s'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="per_tag_linearized" class="idref" href="#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> (<a id="t:76" class="idref" href="#t:76"><span class="id" title="binder">t</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tag:77" class="idref" href="#tag:77"><span class="id" title="binder">tag</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="v:78" class="idref" href="#v:78"><span class="id" title="binder">v</span></a> <a id="v':79" class="idref" href="#v':79"><span class="id" title="binder">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> (<a class="idref" href="intensional.examples.trace_helpers.html#check_tag"><span class="id" title="definition">check_tag</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:77"><span class="id" title="variable">tag</span></a>) <a class="idref" href="intensional.examples.linearizability.html#t:76"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#0dc528ef9d240946b4cc7ba80403735a"><span class="id" title="notation">`</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#0dc528ef9d240946b4cc7ba80403735a"><span class="id" title="notation">prefix_of</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#0dc528ef9d240946b4cc7ba80403735a"><span class="id" title="notation">`</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:77"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:78"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:77"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:78"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':79"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:77"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:78"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':79"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_call_return" class="idref" href="#is_call_return"><span class="id" title="definition">is_call_return</span></a> (<a id="v:80" class="idref" href="#v:80"><span class="id" title="binder">v</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="intensional.examples.linearizability.html#v:80"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">_</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span> | <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">_</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_lin" class="idref" href="#is_lin"><span class="id" title="definition">is_lin</span></a> (<a id="v:82" class="idref" href="#v:82"><span class="id" title="binder">v</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="intensional.examples.linearizability.html#v:82"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">_</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="linearizable" class="idref" href="#linearizable"><span class="id" title="definition">linearizable</span></a> `{<a id="H:84" class="idref" href="#H:84"><span class="id" title="binder">model</span></a>} <a id="t:85" class="idref" href="#t:85"><span class="id" title="binder">t</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="t':86" class="idref" href="#t':86"><span class="id" title="binder">t'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#linearization_trace"><span class="id" title="inductive">linearization_trace</span></a> <a class="idref" href="intensional.examples.linearizability.html#t':86"><span class="id" title="variable">t'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> <a class="idref" href="intensional.examples.linearizability.html#t':86"><span class="id" title="variable">t'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:85"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="intensional.examples.linearizability.html#is_call_return"><span class="id" title="definition">is_call_return</span></a> <a class="idref" href="intensional.examples.linearizability.html#t':86"><span class="id" title="variable">t'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s':87" class="idref" href="#s':87"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#linearized_sound"><span class="id" title="inductive">linearized_sound</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="intensional.examples.linearizability.html#is_lin"><span class="id" title="definition">is_lin</span></a> <a class="idref" href="intensional.examples.linearizability.html#t':86"><span class="id" title="variable">t'</span></a>) <a class="idref" href="intensional.examples.linearizability.html#s_init"><span class="id" title="method">s_init</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':87"><span class="id" title="variable">s'</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;lemmas&nbsp;about&nbsp;the&nbsp;linearizability&nbsp;notions&nbsp;above&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="linearizable_nil" class="idref" href="#linearizable_nil"><span class="id" title="lemma">linearizable_nil</span></a> `{<a id="H:88" class="idref" href="#H:88"><span class="id" title="binder">model</span></a>}: <a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="var">split_and</span>!.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>, <a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_nil"><span class="id" title="lemma">prefix_nil</span></a>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <a class="idref" href="intensional.examples.linearizability.html#s_init"><span class="id" title="method">s_init</span></a>. <span class="id" title="tactic">constructor</span>. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="per_tag_linearized_prefix" class="idref" href="#per_tag_linearized_prefix"><span class="id" title="lemma">per_tag_linearized_prefix</span></a> <a id="t:89" class="idref" href="#t:89"><span class="id" title="binder">t</span></a> <a id="t':90" class="idref" href="#t':90"><span class="id" title="binder">t'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> <a class="idref" href="intensional.examples.linearizability.html#t':90"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#t:89"><span class="id" title="variable">t</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#0dc528ef9d240946b4cc7ba80403735a"><span class="id" title="notation">`</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#0dc528ef9d240946b4cc7ba80403735a"><span class="id" title="notation">prefix_of</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#0dc528ef9d240946b4cc7ba80403735a"><span class="id" title="notation">`</span></a> <a class="idref" href="intensional.examples.linearizability.html#t':90"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:89"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Ht'</span> [<span class="id" title="var">l</span> -&gt;].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tag</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ht'</span> <span class="id" title="var">tag</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> &amp; <span class="id" title="var">v'</span> &amp; <span class="id" title="var">Ht'</span>). <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>, <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht'</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_app_l"><span class="id" title="lemma">prefix_app_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="linearization_fresh_tag_call_ret" class="idref" href="#linearization_fresh_tag_call_ret"><span class="id" title="lemma">linearization_fresh_tag_call_ret</span></a> <a id="t:91" class="idref" href="#t:91"><span class="id" title="binder">t</span></a> <a id="tag:92" class="idref" href="#tag:92"><span class="id" title="binder">tag</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearization_trace"><span class="id" title="inductive">linearization_trace</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:91"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:91"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#tag:92"><span class="id" title="variable">tag</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.tags"><span class="id" title="definition">tags</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="intensional.examples.linearizability.html#is_call_return"><span class="id" title="definition">is_call_return</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:91"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#tag:92"><span class="id" title="variable">tag</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.tags"><span class="id" title="definition">tags</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:91"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">tag</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hl</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> !<a class="idref" href="intensional.examples.trace_helpers.html#tags_app"><span class="id" title="lemma">tags_app</span></a>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">tag0</span> <span class="id" title="var">Htl</span> [<span class="id" title="var">Hf1</span> <span class="id" title="var">Hf2</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#not_elem_of_app"><span class="id" title="lemma">not_elem_of_app</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#not_elem_of_app"><span class="id" title="lemma">not_elem_of_app</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized_prefix"><span class="id" title="lemma">per_tag_linearized_prefix</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_app_r"><span class="id" title="lemma">prefix_app_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>); <span class="id" title="var">last</span> <span class="id" title="var">done</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">tag0</span> <span class="id" title="var">Htl</span> [<span class="id" title="var">Hf1</span> <span class="id" title="var">Hf2</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#not_elem_of_app"><span class="id" title="lemma">not_elem_of_app</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#not_elem_of_app"><span class="id" title="lemma">not_elem_of_app</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized_prefix"><span class="id" title="lemma">per_tag_linearized_prefix</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_app_r"><span class="id" title="lemma">prefix_app_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hf2</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Htl</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Htl</span> <span class="id" title="var">tag0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v0</span> [<span class="id" title="var">v'0</span> <span class="id" title="var">Htl</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="intensional.examples.stdpp_extra.html#filter_is_nil"><span class="id" title="lemma">filter_is_nil</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="intensional.examples.trace_helpers.html#fresh_tag_nocheck"><span class="id" title="lemma">fresh_tag_nocheck</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized_prefix"><span class="id" title="lemma">per_tag_linearized_prefix</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_app_r"><span class="id" title="lemma">prefix_app_r</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">tag0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">tag</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_eq"><span class="id" title="lemma">filter_check_single_tag_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htl</span> <span class="id" title="keyword">as</span> (? &amp; <span class="id" title="var">HHH</span>). <span class="id" title="tactic">inversion</span> <span class="id" title="var">HHH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">tag0</span> <span class="id" title="var">Htl</span> [<span class="id" title="var">Hf1</span> <span class="id" title="var">Hf2</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#not_elem_of_app"><span class="id" title="lemma">not_elem_of_app</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#not_elem_of_app"><span class="id" title="lemma">not_elem_of_app</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized_prefix"><span class="id" title="lemma">per_tag_linearized_prefix</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_app_r"><span class="id" title="lemma">prefix_app_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>); <span class="id" title="var">last</span> <span class="id" title="var">done</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a>. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="per_tag_linearized_add_call" class="idref" href="#per_tag_linearized_add_call"><span class="id" title="lemma">per_tag_linearized_add_call</span></a> <a id="t:93" class="idref" href="#t:93"><span class="id" title="binder">t</span></a> (<a id="tag:94" class="idref" href="#tag:94"><span class="id" title="binder">tag</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a id="v:95" class="idref" href="#v:95"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:93"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#tag:94"><span class="id" title="variable">tag</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.tags"><span class="id" title="definition">tags</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:93"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> (<a class="idref" href="intensional.examples.linearizability.html#t:93"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:94"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:95"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Htl</span> <span class="id" title="var">Htag</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">tag'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Htl</span> <span class="id" title="var">tag'</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">v0</span> &amp; <span class="id" title="var">v0'</span> &amp; <span class="id" title="var">Htl</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">tag</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">tag'</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>, <span class="id" title="var">v</span><span class="comment">(*dummy*)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="intensional.examples.stdpp_extra.html#filter_is_nil"><span class="id" title="lemma">filter_is_nil</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span>). 2: <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="intensional.examples.trace_helpers.html#fresh_tag_nocheck"><span class="id" title="lemma">fresh_tag_nocheck</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_eq"><span class="id" title="lemma">filter_check_single_tag_eq</span></a> /=. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_cons"><span class="id" title="lemma">prefix_cons</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_nil"><span class="id" title="lemma">prefix_nil</span></a>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">v0</span>, <span class="id" title="var">v0'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_neq"><span class="id" title="lemma">filter_check_single_tag_neq</span></a> // <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="per_tag_linearized_add_lin" class="idref" href="#per_tag_linearized_add_lin"><span class="id" title="lemma">per_tag_linearized_add_lin</span></a> <a id="t:96" class="idref" href="#t:96"><span class="id" title="binder">t</span></a> (<a id="tag:97" class="idref" href="#tag:97"><span class="id" title="binder">tag</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a id="v:98" class="idref" href="#v:98"><span class="id" title="binder">v</span></a> <a id="v':99" class="idref" href="#v':99"><span class="id" title="binder">v'</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:96"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:100" class="idref" href="#v:100"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#check_tag"><span class="id" title="definition">check_tag</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:97"><span class="id" title="variable">tag</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:100"><span class="id" title="variable">v</span></a>) <a class="idref" href="intensional.examples.linearizability.html#t:96"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:97"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:98"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> (<a class="idref" href="intensional.examples.linearizability.html#t:96"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:97"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:98"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':99"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Htl</span> <span class="id" title="var">Hft</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">tag'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Htl</span> <span class="id" title="var">tag'</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">v0</span> &amp; <span class="id" title="var">v0'</span> &amp; <span class="id" title="var">Htl</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">tag</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">tag'</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>, <span class="id" title="var">v'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hft</span> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_eq"><span class="id" title="lemma">filter_check_single_tag_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_cons"><span class="id" title="lemma">prefix_cons</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_nil"><span class="id" title="lemma">prefix_nil</span></a>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">v0</span>, <span class="id" title="var">v0'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_neq"><span class="id" title="lemma">filter_check_single_tag_neq</span></a> // <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="per_tag_linearized_add_ret" class="idref" href="#per_tag_linearized_add_ret"><span class="id" title="lemma">per_tag_linearized_add_ret</span></a> <a id="t:101" class="idref" href="#t:101"><span class="id" title="binder">t</span></a> (<a id="tag:102" class="idref" href="#tag:102"><span class="id" title="binder">tag</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a id="v:103" class="idref" href="#v:103"><span class="id" title="binder">v</span></a> <a id="v':104" class="idref" href="#v':104"><span class="id" title="binder">v'</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:101"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:105" class="idref" href="#v:105"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#check_tag"><span class="id" title="definition">check_tag</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:102"><span class="id" title="variable">tag</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:105"><span class="id" title="variable">v</span></a>) <a class="idref" href="intensional.examples.linearizability.html#t:101"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:102"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:103"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:102"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:103"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':104"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> (<a class="idref" href="intensional.examples.linearizability.html#t:101"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:102"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:103"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':104"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Htl</span> <span class="id" title="var">Hft</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">tag'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Htl</span> <span class="id" title="var">tag'</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">v0</span> &amp; <span class="id" title="var">v0'</span> &amp; <span class="id" title="var">Htl</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">tag</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">tag'</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>, <span class="id" title="var">v'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hft</span> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_eq"><span class="id" title="lemma">filter_check_single_tag_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_cons"><span class="id" title="lemma">prefix_cons</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_nil"><span class="id" title="lemma">prefix_nil</span></a>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">v0</span>, <span class="id" title="var">v0'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_neq"><span class="id" title="lemma">filter_check_single_tag_neq</span></a> // <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="intensional.examples.linearizability.html#Trace"><span class="id" title="section">Trace</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab30"></a><h3 class="section">Definition and correctness of the wrapper code</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="Wrap" class="idref" href="#Wrap"><span class="id" title="module">Wrap</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="Wrap.tag_state" class="idref" href="#Wrap.tag_state"><span class="id" title="inductive">tag_state</span></a> :=<br/>
&nbsp;&nbsp;| <a id="Wrap.AfterCall" class="idref" href="#Wrap.AfterCall"><span class="id" title="constructor">AfterCall</span></a> (<a id="v:108" class="idref" href="#v:108"><span class="id" title="binder">v</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>)<br/>
&nbsp;&nbsp;| <a id="Wrap.AfterLin" class="idref" href="#Wrap.AfterLin"><span class="id" title="constructor">AfterLin</span></a> (<a id="v:109" class="idref" href="#v:109"><span class="id" title="binder">v</span></a> <a id="v':110" class="idref" href="#v':110"><span class="id" title="binder">v'</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>)<br/>
&nbsp;&nbsp;| <a id="Wrap.Done" class="idref" href="#Wrap.Done"><span class="id" title="constructor">Done</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;we&nbsp;need&nbsp;extra&nbsp;resource&nbsp;algebras&nbsp;for&nbsp;our&nbsp;ghost&nbsp;state&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <a id="Wrap.linG" class="idref" href="#Wrap.linG"><span class="id" title="record">linG</span></a> `{<a id="H:111" class="idref" href="#H:111"><span class="id" title="binder">model</span></a>} (<a id="6331a09bee1fd08c7dac0167a6c36fc8" class="idref" href="#6331a09bee1fd08c7dac0167a6c36fc8"><span class="id" title="binder">Σ</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="definition">gFunctors</span></a>) := {<br/>
&nbsp;&nbsp;<a id="Wrap.lin_model_inG" class="idref" href="#Wrap.lin_model_inG"><span class="id" title="projection">lin_model_inG</span></a> :&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="intensional.examples.linearizability.html#6331a09bee1fd08c7dac0167a6c36fc8"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#excl_authR"><span class="id" title="definition">excl_authR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="intensional.examples.linearizability.html#S"><span class="id" title="method">S</span></a>));<br/>
&nbsp;&nbsp;<a id="Wrap.lin_gnames_inG" class="idref" href="#Wrap.lin_gnames_inG"><span class="id" title="projection">lin_gnames_inG</span></a> :&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="intensional.examples.linearizability.html#6331a09bee1fd08c7dac0167a6c36fc8"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#excl_authR"><span class="id" title="definition">excl_authR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>)));<br/>
&nbsp;&nbsp;<a id="Wrap.lin_tag_state_inG" class="idref" href="#Wrap.lin_tag_state_inG"><span class="id" title="projection">lin_tag_state_inG</span></a> :&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="intensional.examples.linearizability.html#6331a09bee1fd08c7dac0167a6c36fc8"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#excl_authR"><span class="id" title="definition">excl_authR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.tag_state"><span class="id" title="inductive">tag_state</span></a>));<br/>
&nbsp;&nbsp;<a id="Wrap.lin_tag_res_inG" class="idref" href="#Wrap.lin_tag_res_inG"><span class="id" title="projection">lin_tag_res_inG</span></a> :&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="intensional.examples.linearizability.html#6331a09bee1fd08c7dac0167a6c36fc8"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#authR"><span class="id" title="definition">authR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.gmap.html#gmapUR"><span class="id" title="definition">gmapUR</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agreeR"><span class="id" title="definition">agreeR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>))));<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="254603949953a34e3ee2d8a803fe2280" class="idref" href="#254603949953a34e3ee2d8a803fe2280"><span class="id" title="definition">linΣ</span></a> `{<a id="H:118" class="idref" href="#H:118"><span class="id" title="binder">model</span></a>} : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="definition">gFunctors</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">#[</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#GFunctor"><span class="id" title="constructor">GFunctor</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#excl_authR"><span class="id" title="definition">excl_authR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="intensional.examples.linearizability.html#S"><span class="id" title="method">S</span></a>))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#GFunctor"><span class="id" title="constructor">GFunctor</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#excl_authR"><span class="id" title="definition">excl_authR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>)))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#GFunctor"><span class="id" title="constructor">GFunctor</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#excl_authR"><span class="id" title="definition">excl_authR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.tag_state"><span class="id" title="inductive">tag_state</span></a>))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#GFunctor"><span class="id" title="constructor">GFunctor</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#authR"><span class="id" title="definition">authR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.gmap.html#gmapUR"><span class="id" title="definition">gmapUR</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agreeR"><span class="id" title="definition">agreeR</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>))))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">]</span></a>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="Wrap.subG_linG" class="idref" href="#Wrap.subG_linG"><span class="id" title="instance">subG_linG</span></a> `{<a id="H:119" class="idref" href="#H:119"><span class="id" title="binder">model</span></a>}: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#subG"><span class="id" title="class">subG</span></a> <a class="idref" href="intensional.examples.linearizability.html#254603949953a34e3ee2d8a803fe2280"><span class="id" title="definition">linΣ</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.linG"><span class="id" title="class">linG</span></a> <span class="id" title="var">Σ</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_inG</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Wrap.S" class="idref" href="#Wrap.S"><span class="id" title="section">S</span></a>.<br/>
<span class="id" title="keyword">Context</span> {<a id="22291429b6747bbc3b99ddb1e9a3d90c" class="idref" href="#22291429b6747bbc3b99ddb1e9a3d90c"><span class="id" title="binder">Σ</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="definition">gFunctors</span></a>}.<br/>
<span class="id" title="keyword">Context</span> `{<a id="H:122" class="idref" href="#H:122"><span class="id" title="binder">heapG</span></a> <a id="H:122" class="idref" href="#H:122"><span class="id" title="binder">Σ</span></a>, <a id="H0:123" class="idref" href="#H0:123"><span class="id" title="binder">model</span></a>, <a id="H2:125" class="idref" href="#H2:125"><span class="id" title="binder">linG</span></a> <a id="H2:125" class="idref" href="#H2:125"><span class="id" title="binder">Σ</span></a>}.<br/>
<span class="id" title="keyword">Context</span> (<a id="N:126" class="idref" href="#N:126"><span class="id" title="binder">N</span></a> <a id="N':127" class="idref" href="#N':127"><span class="id" title="binder">N'</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#namespace"><span class="id" title="definition">namespace</span></a>) (<a id="HNN':128" class="idref" href="#HNN':128"><span class="id" title="binder">HNN'</span></a>: <a class="idref" href="intensional.examples.linearizability.html#N:126"><span class="id" title="variable">N</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="intensional.examples.linearizability.html#N':127"><span class="id" title="variable">N'</span></a>).<br/>
<span class="id" title="keyword">Definition</span> <a id="Wrap.mainN" class="idref" href="#Wrap.mainN"><span class="id" title="definition">mainN</span></a> := <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.N'"><span class="id" title="variable">N'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a> "main".<br/>
<span class="id" title="keyword">Definition</span> <a id="Wrap.traceN" class="idref" href="#Wrap.traceN"><span class="id" title="definition">traceN</span></a> := <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.N'"><span class="id" title="variable">N'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a> "trace".<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> <a id="Wrap.SO" class="idref" href="#Wrap.SO"><span class="id" title="abbreviation">SO</span></a> := (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="intensional.examples.linearizability.html#S"><span class="id" title="method">S</span></a>).<br/>

<br/>
<span class="id" title="keyword">Context</span> (<a id="R_impl:129" class="idref" href="#R_impl:129"><span class="id" title="binder">R_impl</span></a> : <a class="idref" href="intensional.examples.linearizability.html#repr"><span class="id" title="record">repr</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5da07e9f970d9edb71a55b2fcc3a71d"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Context</span> (<a id="Pinit_impl:130" class="idref" href="#Pinit_impl:130"><span class="id" title="binder">Pinit_impl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5da07e9f970d9edb71a55b2fcc3a71d"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Context</span> (<a id="init_impl:131" class="idref" href="#init_impl:131"><span class="id" title="binder">init_impl</span></a> <a id="op_impl:132" class="idref" href="#op_impl:132"><span class="id" title="binder">op_impl</span></a> : <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Wrap.init" class="idref" href="#Wrap.init"><span class="id" title="definition">init</span></a> : <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="intensional.heap_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "_"<a class="idref" href="intensional.heap_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "r" <a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.init_impl"><span class="id" title="variable">init_impl</span></a> <a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a> "r".<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Wrap.op" class="idref" href="#Wrap.op"><span class="id" title="definition">op</span></a> : <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="intensional.heap_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "x" "y"<a class="idref" href="intensional.heap_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "t" <a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.Fresh"><span class="id" title="constructor">Fresh</span></a> <a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "y"<a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)</span></a> <a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">let</span></a><a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:</span></a> "r" <a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">:=</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.op_impl"><span class="id" title="variable">op_impl</span></a> "x" "y" <a class="idref" href="intensional.heap_lang.notation.html#f2a86cf1716b42d91300f888867d22e8"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.lang.html#heap_lang.Emit"><span class="id" title="constructor">Emit</span></a> <a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"t"<a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">(</span></a>"y"<a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">,</span></a> "r"<a class="idref" href="intensional.heap_lang.notation.html#ec04ba08aeb86de76ca579a7aa123c03"><span class="id" title="notation">)))</span></a> <a class="idref" href="intensional.heap_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;"r".<br/>

<br/>
</div>

<div class="doc">
The logical state associated with the tags indexed in <span class="inlinecode"><span class="id" title="var">m</span></span>. (Named
    <span class="inlinecode"><span class="id" title="var">tagsState</span></span> in the paper.) 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Wrap.tags_state" class="idref" href="#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> (<a id="t:133" class="idref" href="#t:133"><span class="id" title="binder">t</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="m:134" class="idref" href="#m:134"><span class="id" title="binder">m</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agree"><span class="id" title="record">agree</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>))) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5da07e9f970d9edb71a55b2fcc3a71d"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#264a02242b2109f2f20d5966cde814b4"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#264a02242b2109f2f20d5966cde814b4"><span class="id" title="notation">map</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#264a02242b2109f2f20d5966cde814b4"><span class="id" title="notation">]</span></a> <a id="tag:135" class="idref" href="#tag:135"><span class="id" title="binder">tag</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#264a02242b2109f2f20d5966cde814b4"><span class="id" title="notation">↦</span></a><a id="gs:136" class="idref" href="#gs:136"><span class="id" title="binder">gs</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#264a02242b2109f2f20d5966cde814b4"><span class="id" title="notation">∈</span></a> <a class="idref" href="intensional.examples.linearizability.html#m:134"><span class="id" title="variable">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#264a02242b2109f2f20d5966cde814b4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="a5f07d5acd27abedaa1d937b70831936" class="idref" href="#a5f07d5acd27abedaa1d937b70831936"><span class="id" title="binder">γs</span></a> <a id="tagst:138" class="idref" href="#tagst:138"><span class="id" title="binder">tagst</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#gs:136"><span class="id" title="variable">gs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5f07d5acd27abedaa1d937b70831936"><span class="id" title="variable">γs</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5f07d5acd27abedaa1d937b70831936"><span class="id" title="variable">γs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">●</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#tagst:138"><span class="id" title="variable">tagst</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="elts:139" class="idref" href="#elts:139"><span class="id" title="binder">elts</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> (<a class="idref" href="intensional.examples.trace_helpers.html#check_tag"><span class="id" title="definition">check_tag</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:135"><span class="id" title="variable">tag</span></a>) <a class="idref" href="intensional.examples.linearizability.html#t:133"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><span class="id" title="keyword">match</span> <a class="idref" href="intensional.examples.linearizability.html#tagst:138"><span class="id" title="variable">tagst</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterCall"><span class="id" title="constructor">AfterCall</span></a> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#elts:139"><span class="id" title="variable">elts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:135"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterLin"><span class="id" title="constructor">AfterLin</span></a> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#elts:139"><span class="id" title="variable">elts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:135"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:135"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="intensional.examples.linearizability.html#Wrap.Done"><span class="id" title="constructor">Done</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>)%<span class="id" title="var">I</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.tags_state_call_to_lin" class="idref" href="#Wrap.tags_state_call_to_lin"><span class="id" title="lemma">tags_state_call_to_lin</span></a> <a id="v:141" class="idref" href="#v:141"><span class="id" title="binder">v</span></a> <a id="v':142" class="idref" href="#v':142"><span class="id" title="binder">v'</span></a> <a id="t:143" class="idref" href="#t:143"><span class="id" title="binder">t</span></a> (<a id="m:144" class="idref" href="#m:144"><span class="id" title="binder">m</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agree"><span class="id" title="record">agree</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tag:145" class="idref" href="#tag:145"><span class="id" title="binder">tag</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a id="e2cd22ed95afa6be294dcf9008b53708" class="idref" href="#e2cd22ed95afa6be294dcf9008b53708"><span class="id" title="binder">γs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#m:144"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:145"><span class="id" title="variable">tag</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> <a class="idref" href="intensional.examples.linearizability.html#e2cd22ed95afa6be294dcf9008b53708"><span class="id" title="variable">γs</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#e2cd22ed95afa6be294dcf9008b53708"><span class="id" title="variable">γs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterCall"><span class="id" title="constructor">AfterCall</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:141"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:143"><span class="id" title="variable">t</span></a> <a class="idref" href="intensional.examples.linearizability.html#m:144"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#978156496a632d1434132892b1e662aa"><span class="id" title="notation">==∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#e2cd22ed95afa6be294dcf9008b53708"><span class="id" title="variable">γs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterLin"><span class="id" title="constructor">AfterLin</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:141"><span class="id" title="variable">v</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':142"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> (<a class="idref" href="intensional.examples.linearizability.html#t:143"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:145"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:141"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':142"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="intensional.examples.linearizability.html#m:144"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Htag</span>) "[Hs Hm]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_delete"><span class="id" title="lemma">big_sepM_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tag</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hm"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "(Htag &amp; Hm)". <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Htag" <span class="id" title="keyword">as</span> (? ? ?) "(Hsa &amp; Hst)". <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hst" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.iris_extra.html#excl_auth_eq"><span class="id" title="lemma">excl_auth_eq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hs Hsa"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %&lt;-.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.iris_extra.html#excl_auth_upd"><span class="id" title="lemma">excl_auth_upd</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterLin"><span class="id" title="constructor">AfterLin</span></a> <span class="id" title="var">v</span> <span class="id" title="var">v'</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hs Hsa"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Hs Hsa]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_delete"><span class="id" title="lemma">big_sepM_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">tag</span>) //; [].<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hsa".<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iSplitR</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>|]. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_eq"><span class="id" title="lemma">filter_check_single_tag_eq</span></a> <span class="id" title="var">Hst</span> //. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_mono"><span class="id" title="lemma">big_sepM_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hm"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">tag'</span> <span class="id" title="var">g</span> <span class="id" title="var">Htag'</span>) "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span> <span class="id" title="var">st</span> -&gt;) "(Hγ &amp; H)". <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hst'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_delete_Some"><span class="id" title="lemma">lookup_delete_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htag'</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Htag'</span>]. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>|]. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_neq"><span class="id" title="lemma">filter_check_single_tag_neq</span></a> // <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.tags_state_lin_to_ret" class="idref" href="#Wrap.tags_state_lin_to_ret"><span class="id" title="lemma">tags_state_lin_to_ret</span></a> <a id="v:147" class="idref" href="#v:147"><span class="id" title="binder">v</span></a> <a id="v':148" class="idref" href="#v':148"><span class="id" title="binder">v'</span></a> <a id="t:149" class="idref" href="#t:149"><span class="id" title="binder">t</span></a> (<a id="m:150" class="idref" href="#m:150"><span class="id" title="binder">m</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agree"><span class="id" title="record">agree</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tag:151" class="idref" href="#tag:151"><span class="id" title="binder">tag</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a id="cf54e61a7ec6c2fa0af7e77ec84cdecc" class="idref" href="#cf54e61a7ec6c2fa0af7e77ec84cdecc"><span class="id" title="binder">γs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#m:150"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:151"><span class="id" title="variable">tag</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> <a class="idref" href="intensional.examples.linearizability.html#cf54e61a7ec6c2fa0af7e77ec84cdecc"><span class="id" title="variable">γs</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#cf54e61a7ec6c2fa0af7e77ec84cdecc"><span class="id" title="variable">γs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterLin"><span class="id" title="constructor">AfterLin</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:147"><span class="id" title="variable">v</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':148"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:149"><span class="id" title="variable">t</span></a> <a class="idref" href="intensional.examples.linearizability.html#m:150"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#978156496a632d1434132892b1e662aa"><span class="id" title="notation">==∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> (<a class="idref" href="intensional.examples.linearizability.html#t:149"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:151"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:147"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':148"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="intensional.examples.linearizability.html#m:150"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Htag</span>) "[Hs Hm]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_delete"><span class="id" title="lemma">big_sepM_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tag</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hm"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "(Htag &amp; Hm)". <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Htag" <span class="id" title="keyword">as</span> (? ? ?) "(Hsa &amp; Hst)". <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hst" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.iris_extra.html#excl_auth_eq"><span class="id" title="lemma">excl_auth_eq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hs Hsa"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %&lt;-.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.iris_extra.html#excl_auth_upd"><span class="id" title="lemma">excl_auth_upd</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hs Hsa"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Hs Hsa]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_delete"><span class="id" title="lemma">big_sepM_delete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">tag</span>) //; [].<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hsa".<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iSplitR</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>|]. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_mono"><span class="id" title="lemma">big_sepM_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hm"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">tag'</span> <span class="id" title="var">g</span> <span class="id" title="var">Htag'</span>) "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span> <span class="id" title="var">st</span> -&gt;) "(Hγ &amp; H)". <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hst'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_delete_Some"><span class="id" title="lemma">lookup_delete_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htag'</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Htag'</span>]. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>|]. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_neq"><span class="id" title="lemma">filter_check_single_tag_neq</span></a> // <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.tags_state_lookup_sub" class="idref" href="#Wrap.tags_state_lookup_sub"><span class="id" title="lemma">tags_state_lookup_sub</span></a> <a id="c0cf1192a15b70a4d629eff36d8e0c8c" class="idref" href="#c0cf1192a15b70a4d629eff36d8e0c8c"><span class="id" title="binder">γ</span></a> (<a id="m:154" class="idref" href="#m:154"><span class="id" title="binder">m</span></a> <a id="m':155" class="idref" href="#m':155"><span class="id" title="binder">m'</span></a>:<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agree"><span class="id" title="record">agree</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="tag:156" class="idref" href="#tag:156"><span class="id" title="binder">tag</span></a> <a id="g:157" class="idref" href="#g:157"><span class="id" title="binder">g</span></a> <a id="t:158" class="idref" href="#t:158"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#m:154"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:156"><span class="id" title="variable">tag</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> <a class="idref" href="intensional.examples.linearizability.html#g:157"><span class="id" title="variable">g</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#c0cf1192a15b70a4d629eff36d8e0c8c"><span class="id" title="variable">γ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">◯</span></a> <a class="idref" href="intensional.examples.linearizability.html#m:154"><span class="id" title="variable">m</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#c0cf1192a15b70a4d629eff36d8e0c8c"><span class="id" title="variable">γ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#7981e4e059142a780e33f94ac62f7355"><span class="id" title="notation">●</span></a> <a class="idref" href="intensional.examples.linearizability.html#m':155"><span class="id" title="variable">m'</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> <a class="idref" href="intensional.examples.linearizability.html#t:158"><span class="id" title="variable">t</span></a> <a class="idref" href="intensional.examples.linearizability.html#m':155"><span class="id" title="variable">m'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#m':155"><span class="id" title="variable">m'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:156"><span class="id" title="variable">tag</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> <a class="idref" href="intensional.examples.linearizability.html#g:157"><span class="id" title="variable">g</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hkv</span>) "Hf Ha Hm".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own_op"><span class="id" title="lemma">own_op</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$Ha $Hf]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HH".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own_valid"><span class="id" title="lemma">own_valid</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HH"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %[<span class="id" title="var">Hsub</span> <span class="id" title="var">Hv</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#auth_both_valid"><span class="id" title="lemma">auth_both_valid</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.gmap.html#dom_included"><span class="id" title="lemma">dom_included</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsub</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsub_dom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.gmap.html#lookup_included"><span class="id" title="lemma">lookup_included</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span> |- * =&gt; <span class="id" title="var">Hsub</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsub</span> <span class="id" title="var">tag</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tag</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <span class="id" title="var">m'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Htag''</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#elem_of_subseteq"><span class="id" title="lemma">elem_of_subseteq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub_dom</span> |- * =&gt; <span class="id" title="var">Hsub_dom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hsub_dom</span>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom"><span class="id" title="method">elem_of_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htag''</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vtok''</span> <span class="id" title="var">Htag''</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htag''</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hkv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.cmra.html#Some_included_total"><span class="id" title="lemma">Some_included_total</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span> |- * =&gt; <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_lookup"><span class="id" title="lemma">big_sepM_lookup</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tag</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hm"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (? ? ?) "Hm". <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">vtok''</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree_included"><span class="id" title="lemma">to_agree_included</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span> |- * =&gt; <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#leibniz_equiv"><span class="id" title="definition">leibniz_equiv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span>. <span class="id" title="var">simplify_eq</span>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The big auxiliary invariant for wrapper proof. It corresponds to <span class="inlinecode"><span class="id" title="var">I</span></span> in the
    paper. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Wrap.main_inv" class="idref" href="#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> (<a id="bc18fe419a95dc0d41e679a7a208ebc5" class="idref" href="#bc18fe419a95dc0d41e679a7a208ebc5"><span class="id" title="binder">γ</span></a> <a id="dc6f61a3cc616bafb682d1e0e2d8051a" class="idref" href="#dc6f61a3cc616bafb682d1e0e2d8051a"><span class="id" title="binder">γi</span></a> <a id="d67500d2778b2d5c19d2ffd1f8ea0d19" class="idref" href="#d67500d2778b2d5c19d2ffd1f8ea0d19"><span class="id" title="binder">γs</span></a> <a id="dec2db867d43946d8305ced7d3718f15" class="idref" href="#dec2db867d43946d8305ced7d3718f15"><span class="id" title="binder">γe</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>) (<a id="s:163" class="idref" href="#s:163"><span class="id" title="binder">s</span></a>: <a class="idref" href="intensional.examples.linearizability.html#S"><span class="id" title="method">S</span></a>) : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5da07e9f970d9edb71a55b2fcc3a71d"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#d67500d2778b2d5c19d2ffd1f8ea0d19"><span class="id" title="variable">γs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">●</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#s:163"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.SO"><span class="id" title="abbreviation">SO</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#bc18fe419a95dc0d41e679a7a208ebc5"><span class="id" title="variable">γ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">●</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#dc6f61a3cc616bafb682d1e0e2d8051a"><span class="id" title="variable">γi</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#d67500d2778b2d5c19d2ffd1f8ea0d19"><span class="id" title="variable">γs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#dec2db867d43946d8305ced7d3718f15"><span class="id" title="variable">γe</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#22dd6fff0d788c356bb928c373f951ae"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><a id="48f953618ba9d3424518b695ed939206" class="idref" href="#48f953618ba9d3424518b695ed939206"><span class="id" title="binder">β</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) (<a id="M:165" class="idref" href="#M:165"><span class="id" title="binder">M</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agree"><span class="id" title="record">agree</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#linearization_trace"><span class="id" title="inductive">linearization_trace</span></a> <a class="idref" href="intensional.examples.linearizability.html#48f953618ba9d3424518b695ed939206"><span class="id" title="variable">β</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#linearized_sound"><span class="id" title="inductive">linearized_sound</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="intensional.examples.linearizability.html#is_lin"><span class="id" title="definition">is_lin</span></a> <a class="idref" href="intensional.examples.linearizability.html#48f953618ba9d3424518b695ed939206"><span class="id" title="variable">β</span></a>) <a class="idref" href="intensional.examples.linearizability.html#s_init"><span class="id" title="method">s_init</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:163"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized"><span class="id" title="definition">per_tag_linearized</span></a> <a class="idref" href="intensional.examples.linearizability.html#48f953618ba9d3424518b695ed939206"><span class="id" title="variable">β</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.lifting.html#trace_is"><span class="id" title="definition">trace_is</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="intensional.examples.linearizability.html#is_call_return"><span class="id" title="definition">is_call_return</span></a> <a class="idref" href="intensional.examples.linearizability.html#48f953618ba9d3424518b695ed939206"><span class="id" title="variable">β</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#dec2db867d43946d8305ced7d3718f15"><span class="id" title="variable">γe</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#7981e4e059142a780e33f94ac62f7355"><span class="id" title="notation">●</span></a> <a class="idref" href="intensional.examples.linearizability.html#M:165"><span class="id" title="variable">M</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#dec2db867d43946d8305ced7d3718f15"><span class="id" title="variable">γe</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">◯</span></a> <a class="idref" href="intensional.examples.linearizability.html#M:165"><span class="id" title="variable">M</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dom"><span class="id" title="definition">dom</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a class="idref" href="intensional.examples.linearizability.html#M:165"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#list_to_set"><span class="id" title="definition">list_to_set</span></a> (<a class="idref" href="intensional.heap_lang.lang.html#heap_lang.tags"><span class="id" title="definition">tags</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="intensional.examples.linearizability.html#is_call_return"><span class="id" title="definition">is_call_return</span></a> <a class="idref" href="intensional.examples.linearizability.html#48f953618ba9d3424518b695ed939206"><span class="id" title="variable">β</span></a>)) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> <a class="idref" href="intensional.examples.linearizability.html#48f953618ba9d3424518b695ed939206"><span class="id" title="variable">β</span></a> <a class="idref" href="intensional.examples.linearizability.html#M:165"><span class="id" title="variable">M</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Wrap.is_P_wrap" class="idref" href="#Wrap.is_P_wrap"><span class="id" title="definition">is_P_wrap</span></a> <a id="7670b0fe000200fef9180d51b86969c0" class="idref" href="#7670b0fe000200fef9180d51b86969c0"><span class="id" title="binder">γ</span></a> <a id="x:167" class="idref" href="#x:167"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5da07e9f970d9edb71a55b2fcc3a71d"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="98d146d5607b646a08684e2c2566beb9" class="idref" href="#98d146d5607b646a08684e2c2566beb9"><span class="id" title="binder">γi</span></a> <a id="40a3cfa38cb5ab37f4ccb7777de450af" class="idref" href="#40a3cfa38cb5ab37f4ccb7777de450af"><span class="id" title="binder">γs</span></a> <a id="d876d1b4a2c42cb5deec5e5f9351628b" class="idref" href="#d876d1b4a2c42cb5deec5e5f9351628b"><span class="id" title="binder">γe</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#is_P"><span class="id" title="projection">is_P</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.R_impl"><span class="id" title="variable">R_impl</span></a> <a class="idref" href="intensional.examples.linearizability.html#98d146d5607b646a08684e2c2566beb9"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#x:167"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.invariants.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.mainN"><span class="id" title="definition">mainN</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="s:171" class="idref" href="#s:171"><span class="id" title="binder">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#7670b0fe000200fef9180d51b86969c0"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#98d146d5607b646a08684e2c2566beb9"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#40a3cfa38cb5ab37f4ccb7777de450af"><span class="id" title="variable">γs</span></a> <a class="idref" href="intensional.examples.linearizability.html#d876d1b4a2c42cb5deec5e5f9351628b"><span class="id" title="variable">γe</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:171"><span class="id" title="variable">s</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.lifting.html#trace_inv"><span class="id" title="definition">trace_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.traceN"><span class="id" title="definition">traceN</span></a> <a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Wrap.P_state_wrap" class="idref" href="#Wrap.P_state_wrap"><span class="id" title="definition">P_state_wrap</span></a> <a id="6e8d753e27180285700541751d2c98b8" class="idref" href="#6e8d753e27180285700541751d2c98b8"><span class="id" title="binder">γ</span></a> <a id="s:173" class="idref" href="#s:173"><span class="id" title="binder">s</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5da07e9f970d9edb71a55b2fcc3a71d"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="0e1d04ddcb2faf78198ff2bc3fecb1ee" class="idref" href="#0e1d04ddcb2faf78198ff2bc3fecb1ee"><span class="id" title="binder">γi</span></a> <a id="288b078e1cdda898cc49d682bc444a5d" class="idref" href="#288b078e1cdda898cc49d682bc444a5d"><span class="id" title="binder">γs</span></a> <a id="3394792c4c79e69f6fe2e7bf59fe33f5" class="idref" href="#3394792c4c79e69f6fe2e7bf59fe33f5"><span class="id" title="binder">γe</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#P_state"><span class="id" title="projection">P_state</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.R_impl"><span class="id" title="variable">R_impl</span></a> <a class="idref" href="intensional.examples.linearizability.html#0e1d04ddcb2faf78198ff2bc3fecb1ee"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:173"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#288b078e1cdda898cc49d682bc444a5d"><span class="id" title="variable">γs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#s:173"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.SO"><span class="id" title="abbreviation">SO</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#6e8d753e27180285700541751d2c98b8"><span class="id" title="variable">γ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#0e1d04ddcb2faf78198ff2bc3fecb1ee"><span class="id" title="variable">γi</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#288b078e1cdda898cc49d682bc444a5d"><span class="id" title="variable">γs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#3394792c4c79e69f6fe2e7bf59fe33f5"><span class="id" title="variable">γe</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Wrap.Pinit" class="idref" href="#Wrap.Pinit"><span class="id" title="definition">Pinit</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5da07e9f970d9edb71a55b2fcc3a71d"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.S.Pinit_impl"><span class="id" title="variable">Pinit_impl</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="intensional.heap_lang.lifting.html#trace_is"><span class="id" title="definition">trace_is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="intensional.heap_lang.lifting.html#trace_inv"><span class="id" title="definition">trace_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.traceN"><span class="id" title="definition">traceN</span></a> <a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Wrap.R" class="idref" href="#Wrap.R"><span class="id" title="definition">R</span></a> : <a class="idref" href="intensional.examples.linearizability.html#repr"><span class="id" title="record">repr</span></a> <a class="idref" href="intensional.examples.linearizability.html#a5da07e9f970d9edb71a55b2fcc3a71d"><span class="id" title="variable">Σ</span></a> := <a class="idref" href="intensional.examples.linearizability.html#Build_repr"><span class="id" title="constructor">Build_repr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.is_P_wrap"><span class="id" title="definition">is_P_wrap</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.P_state_wrap"><span class="id" title="definition">P_state_wrap</span></a> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.main_inv_gnames_eq" class="idref" href="#Wrap.main_inv_gnames_eq"><span class="id" title="lemma">main_inv_gnames_eq</span></a> <a id="d3619922e9ded78cca017f7b15aea92e" class="idref" href="#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="binder">γ</span></a> <a id="02861bed7d4d0a802df3323ac97f2533" class="idref" href="#02861bed7d4d0a802df3323ac97f2533"><span class="id" title="binder">γi</span></a> <a id="782c11fb279484a7c45de1f4e8d5b1f5" class="idref" href="#782c11fb279484a7c45de1f4e8d5b1f5"><span class="id" title="binder">γs</span></a> <a id="9acea3e38da91c377d581edcf6a31f56" class="idref" href="#9acea3e38da91c377d581edcf6a31f56"><span class="id" title="binder">γe</span></a> <a id="eadc51ea23a018a8dbe94d9238cb1a18" class="idref" href="#eadc51ea23a018a8dbe94d9238cb1a18"><span class="id" title="binder">γi'</span></a> <a id="13836f339d1097ba7d428b38d0caffd3" class="idref" href="#13836f339d1097ba7d428b38d0caffd3"><span class="id" title="binder">γs'</span></a> <a id="09483637e075abfba1bb0c4261c9228c" class="idref" href="#09483637e075abfba1bb0c4261c9228c"><span class="id" title="binder">γe'</span></a> <a id="s:184" class="idref" href="#s:184"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="variable">γ</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#eadc51ea23a018a8dbe94d9238cb1a18"><span class="id" title="variable">γi'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#13836f339d1097ba7d428b38d0caffd3"><span class="id" title="variable">γs'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#09483637e075abfba1bb0c4261c9228c"><span class="id" title="variable">γe'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#02861bed7d4d0a802df3323ac97f2533"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#782c11fb279484a7c45de1f4e8d5b1f5"><span class="id" title="variable">γs</span></a> <a class="idref" href="intensional.examples.linearizability.html#9acea3e38da91c377d581edcf6a31f56"><span class="id" title="variable">γe</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:184"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#eadc51ea23a018a8dbe94d9238cb1a18"><span class="id" title="variable">γi'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="intensional.examples.linearizability.html#02861bed7d4d0a802df3323ac97f2533"><span class="id" title="variable">γi</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="intensional.examples.linearizability.html#13836f339d1097ba7d428b38d0caffd3"><span class="id" title="variable">γs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="intensional.examples.linearizability.html#782c11fb279484a7c45de1f4e8d5b1f5"><span class="id" title="variable">γs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="intensional.examples.linearizability.html#09483637e075abfba1bb0c4261c9228c"><span class="id" title="variable">γe'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="intensional.examples.linearizability.html#9acea3e38da91c377d581edcf6a31f56"><span class="id" title="variable">γe</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H (? &amp; HH &amp; ?)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.iris_extra.html#excl_auth_eq"><span class="id" title="lemma">excl_auth_eq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H HH"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %?. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.main_inv_state_eq" class="idref" href="#Wrap.main_inv_state_eq"><span class="id" title="lemma">main_inv_state_eq</span></a> <a id="d654f527b008107ec81f37201cd05c5b" class="idref" href="#d654f527b008107ec81f37201cd05c5b"><span class="id" title="binder">γ</span></a> <a id="bf11823a7f956eff3ec65568a1e933fa" class="idref" href="#bf11823a7f956eff3ec65568a1e933fa"><span class="id" title="binder">γi</span></a> <a id="6c6367714280affeffb0f787853aa218" class="idref" href="#6c6367714280affeffb0f787853aa218"><span class="id" title="binder">γs</span></a> <a id="7848a00cd277f9e334504a9b893ae9f0" class="idref" href="#7848a00cd277f9e334504a9b893ae9f0"><span class="id" title="binder">γe</span></a> <a id="s:189" class="idref" href="#s:189"><span class="id" title="binder">s</span></a> <a id="s':190" class="idref" href="#s':190"><span class="id" title="binder">s'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#6c6367714280affeffb0f787853aa218"><span class="id" title="variable">γs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':190"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#d654f527b008107ec81f37201cd05c5b"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#bf11823a7f956eff3ec65568a1e933fa"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#6c6367714280affeffb0f787853aa218"><span class="id" title="variable">γs</span></a> <a class="idref" href="intensional.examples.linearizability.html#7848a00cd277f9e334504a9b893ae9f0"><span class="id" title="variable">γe</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:189"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#s':190"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:189"><span class="id" title="variable">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H (HH &amp; ?)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.iris_extra.html#excl_auth_eq"><span class="id" title="lemma">excl_auth_eq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H HH"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %?. <span class="id" title="tactic">by</span> <span class="id" title="var">simplify_eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.init_correct" class="idref" href="#Wrap.init_correct"><span class="id" title="lemma">init_correct</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#init_spec"><span class="id" title="definition">init_spec</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.R_impl"><span class="id" title="variable">R_impl</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.Pinit_impl"><span class="id" title="variable">Pinit_impl</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.init_impl"><span class="id" title="variable">init_impl</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#init_spec"><span class="id" title="definition">init_spec</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.R"><span class="id" title="definition">R</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.Pinit"><span class="id" title="definition">Pinit</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.init"><span class="id" title="definition">init</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#spec" (φ) "!&gt; (Hi &amp; Ht &amp; HT) Hφ". <span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.init"><span class="id" title="definition">init</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="intensional.examples.iris_extra.html#excl_auth_alloc"><span class="id" title="lemma">excl_auth_alloc</span></a> <span class="id" title="var">_</span> <a class="idref" href="intensional.examples.linearizability.html#s_init"><span class="id" title="method">s_init</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">γs</span>) "(Hwf &amp; Hwa)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own_alloc"><span class="id" title="lemma">own_alloc</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#7981e4e059142a780e33f94ac62f7355"><span class="id" title="notation">●</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#7981e4e059142a780e33f94ac62f7355"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agree"><span class="id" title="record">agree</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#7981e4e059142a780e33f94ac62f7355"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.cmra.html#15e23efdc9fbc1bcf2fece03abcbccd7"><span class="id" title="notation">⋅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">◯</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agree"><span class="id" title="record">agree</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a>))<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">)</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">γe</span>) "(Htksa &amp; Htksf)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#auth_both_valid_2"><span class="id" title="lemma">auth_both_valid_2</span></a>; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_bind</span> (<a class="idref" href="intensional.examples.linearizability.html#Wrap.S.init_impl"><span class="id" title="variable">init_impl</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"spec" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hi"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">γi</span> <span class="id" title="var">x</span>) "(HH1 &amp; HH2)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="intensional.examples.iris_extra.html#excl_auth_alloc"><span class="id" title="lemma">excl_auth_alloc</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">γi</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">γs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">γe</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "(Hf &amp; Ha)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.invariants.html#inv_alloc"><span class="id" title="lemma">inv_alloc</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.mainN"><span class="id" title="definition">mainN</span></a> <span class="id" title="var">_</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="s:192" class="idref" href="#s:192"><span class="id" title="binder">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <span class="id" title="var">γ</span> <span class="id" title="var">γi</span> <span class="id" title="var">γs</span> <span class="id" title="var">γe</span> <a class="idref" href="intensional.examples.linearizability.html#s:191"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[Ht Ha Hwa Htksa Htksf]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HI".<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <a class="idref" href="intensional.examples.linearizability.html#s_init"><span class="id" title="method">s_init</span></a>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_empty"><span class="id" title="lemma">big_sepM_empty</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="var">split_and</span>!; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>, <a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#prefix_nil"><span class="id" title="lemma">prefix_nil</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_empty_L"><span class="id" title="lemma">dom_empty_L</span></a> //. }<br/>
&nbsp;&nbsp;<span class="id" title="var">wp_pures</span>. <span class="id" title="var">iApply</span> "Hφ".<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "HH1 HI HT". { <span class="id" title="var">iExists</span> <span class="id" title="var">γi</span>, <span class="id" title="var">γs</span>, <span class="id" title="var">γe</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">γi</span>, <span class="id" title="var">γs</span>, <span class="id" title="var">γe</span>. <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Main&nbsp;lemma&nbsp;for&nbsp;the&nbsp;first&nbsp;step&nbsp;of&nbsp;the&nbsp;instrumented&nbsp;<span class="inlinecode"><span class="id" title="var">op</span></span>&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.op_correct_call" class="idref" href="#Wrap.op_correct_call"><span class="id" title="lemma">op_correct_call</span></a> <a id="aa3a5bb0069aee27cd4830c555a0e735" class="idref" href="#aa3a5bb0069aee27cd4830c555a0e735"><span class="id" title="binder">γ</span></a> <a id="3b9794a57d744158c185358a3fa727af" class="idref" href="#3b9794a57d744158c185358a3fa727af"><span class="id" title="binder">γi</span></a> <a id="1ada50a32e7de646d4d96d737eed631a" class="idref" href="#1ada50a32e7de646d4d96d737eed631a"><span class="id" title="binder">γs</span></a> <a id="82c80cc809cf26c873e6cb95279e785d" class="idref" href="#82c80cc809cf26c873e6cb95279e785d"><span class="id" title="binder">γe</span></a> <a id="s:197" class="idref" href="#s:197"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#aa3a5bb0069aee27cd4830c555a0e735"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#3b9794a57d744158c185358a3fa727af"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#1ada50a32e7de646d4d96d737eed631a"><span class="id" title="variable">γs</span></a> <a class="idref" href="intensional.examples.linearizability.html#82c80cc809cf26c873e6cb95279e785d"><span class="id" title="variable">γe</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:197"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="00eb17bfca521e36ca2c59243702e4bb" class="idref" href="#00eb17bfca521e36ca2c59243702e4bb"><span class="id" title="binder">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.lifting.html#trace_is"><span class="id" title="definition">trace_is</span></a> <a class="idref" href="intensional.examples.linearizability.html#00eb17bfca521e36ca2c59243702e4bb"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="tag:199" class="idref" href="#tag:199"><span class="id" title="binder">tag</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a id="v:200" class="idref" href="#v:200"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:199"><span class="id" title="variable">tag</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.tags"><span class="id" title="definition">tags</span></a> <a class="idref" href="intensional.examples.linearizability.html#00eb17bfca521e36ca2c59243702e4bb"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a> (<a class="idref" href="intensional.examples.linearizability.html#00eb17bfca521e36ca2c59243702e4bb"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:199"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:200"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="tag:201" class="idref" href="#tag:201"><span class="id" title="binder">tag</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a id="v:202" class="idref" href="#v:202"><span class="id" title="binder">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.lifting.html#trace_is"><span class="id" title="definition">trace_is</span></a> (<a class="idref" href="intensional.examples.linearizability.html#00eb17bfca521e36ca2c59243702e4bb"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:201"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:202"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:201"><span class="id" title="variable">tag</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.tags"><span class="id" title="definition">tags</span></a> <a class="idref" href="intensional.examples.linearizability.html#00eb17bfca521e36ca2c59243702e4bb"><span class="id" title="variable">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#04b855eff9d58bf18fcc1fd1ead61e24"><span class="id" title="notation">==∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#aa3a5bb0069aee27cd4830c555a0e735"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#3b9794a57d744158c185358a3fa727af"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#1ada50a32e7de646d4d96d737eed631a"><span class="id" title="variable">γs</span></a> <a class="idref" href="intensional.examples.linearizability.html#82c80cc809cf26c873e6cb95279e785d"><span class="id" title="variable">γe</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:197"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="M:203" class="idref" href="#M:203"><span class="id" title="binder">M</span></a> (<a id="4854c066f008e7e1a4ffde3c0ba0fb9a" class="idref" href="#4854c066f008e7e1a4ffde3c0ba0fb9a"><span class="id" title="binder">γtag</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gname"><span class="id" title="definition">gname</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#82c80cc809cf26c873e6cb95279e785d"><span class="id" title="variable">γe</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">◯</span></a> <a class="idref" href="intensional.examples.linearizability.html#M:203"><span class="id" title="variable">M</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#M:203"><span class="id" title="variable">M</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:201"><span class="id" title="variable">tag</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> <a class="idref" href="intensional.examples.linearizability.html#4854c066f008e7e1a4ffde3c0ba0fb9a"><span class="id" title="variable">γtag</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#4854c066f008e7e1a4ffde3c0ba0fb9a"><span class="id" title="variable">γtag</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterCall"><span class="id" title="constructor">AfterCall</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:202"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">HNN'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}/<a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a>. <span class="id" title="var">iIntros</span> "(Hγs &amp; Hγ &amp; Ht)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Ht" <span class="id" title="keyword">as</span> (<span class="id" title="var">β</span> <span class="id" title="var">tokens</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;"(% &amp; % &amp; Htlin &amp; Ht &amp; Hγea &amp; Hγef &amp; Htoks_dom &amp; Htoks)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Htoks_dom" <span class="id" title="keyword">as</span> %<span class="id" title="var">Htoks_dom</span>. <span class="id" title="var">iDestruct</span> "Htlin" <span class="id" title="keyword">as</span> %<span class="id" title="var">Htlin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "Ht".<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">tag</span> <span class="id" title="var">v</span> <span class="id" title="var">Htag</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">β</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">tag</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="intensional.examples.linearizability.html#linearization_fresh_tag_call_ret"><span class="id" title="lemma">linearization_fresh_tag_call_ret</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htag</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hfresh</span>; <span class="id" title="tactic">eauto</span>; []. <span class="id" title="var">split_and</span>!.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized_add_call"><span class="id" title="lemma">per_tag_linearized_add_call</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //. }<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">tag</span> <span class="id" title="var">v</span>) "(Ht &amp; Hfresh)". <span class="id" title="var">iDestruct</span> "Hfresh" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hfresh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="intensional.examples.linearizability.html#linearization_fresh_tag_call_ret"><span class="id" title="lemma">linearization_fresh_tag_call_ret</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hfresh</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hfresh'</span>; <span class="id" title="tactic">eauto</span>; [].<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="intensional.examples.iris_extra.html#excl_auth_alloc"><span class="id" title="lemma">excl_auth_alloc</span></a> <span class="id" title="var">_</span> (<a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterCall"><span class="id" title="constructor">AfterCall</span></a> <span class="id" title="var">v</span>)) <span class="id" title="keyword">as</span> (<span class="id" title="var">gts</span>) "[Hgtsf Hgtsa]".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">tokens'</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <span class="id" title="var">tag</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> (<span class="id" title="var">gts</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">tokens</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tokens</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">tag</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#not_elem_of_dom"><span class="id" title="lemma">not_elem_of_dom</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)). <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htoks_dom</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_list_to_set"><span class="id" title="lemma">not_elem_of_list_to_set</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own_update"><span class="id" title="lemma">own_update</span></a> <span class="id" title="var">_</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#7981e4e059142a780e33f94ac62f7355"><span class="id" title="notation">●</span></a> <span class="id" title="var">tokens</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.cmra.html#15e23efdc9fbc1bcf2fece03abcbccd7"><span class="id" title="notation">⋅</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">◯</span></a> <span class="id" title="var">tokens</span>) (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#7981e4e059142a780e33f94ac62f7355"><span class="id" title="notation">●</span></a> <span class="id" title="var">tokens'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.cmra.html#15e23efdc9fbc1bcf2fece03abcbccd7"><span class="id" title="notation">⋅</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">◯</span></a> <span class="id" title="var">tokens'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[Hγea Hγef]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Hγea #Hγef]".<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#auth_update"><span class="id" title="lemma">auth_update</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.gmap.html#alloc_local_update"><span class="id" title="lemma">alloc_local_update</span></a>; <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iSplit</span>; <span class="id" title="var">iFrame</span>. }<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iSplitR</span> "Hgtsf"; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">tokens'</span>, <span class="id" title="var">gts</span>. <span class="id" title="var">iFrame</span> "Hγef ∗". <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="var">β</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">tag</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>), <span class="id" title="var">tokens'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized_add_call"><span class="id" title="lemma">per_tag_linearized_add_call</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Ht". <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "Hγea Hγef".<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#tags_app"><span class="id" title="lemma">tags_app</span></a> /= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#list_to_set_app_L"><span class="id" title="lemma">list_to_set_app_L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#dom_insert_L"><span class="id" title="lemma">dom_insert_L</span></a> -<span class="id" title="var">Htoks_dom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state"><span class="id" title="definition">tags_state</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_insert"><span class="id" title="lemma">big_sepM_insert</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (@<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#not_elem_of_dom"><span class="id" title="lemma">not_elem_of_dom</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)). <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htoks_dom</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#not_elem_of_list_to_set"><span class="id" title="lemma">not_elem_of_list_to_set</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Hgtsa".<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iSplitR</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>|]. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> /=. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="intensional.examples.stdpp_extra.html#filter_is_nil"><span class="id" title="lemma">filter_is_nil</span></a> <span class="id" title="var">_</span> <span class="id" title="var">β</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="intensional.examples.trace_helpers.html#fresh_tag_nocheck"><span class="id" title="lemma">fresh_tag_nocheck</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#eqb_refl"><span class="id" title="lemma">String.eqb_refl</span></a> //=. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_mono"><span class="id" title="lemma">big_sepM_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Htoks"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">k</span> <span class="id" title="var">gs</span> <span class="id" title="var">Hk</span>) "HH".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HH" <span class="id" title="keyword">as</span> (<span class="id" title="var">γe'</span> <span class="id" title="var">gts'</span> ?) "HH". <span class="id" title="var">simplify_eq</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#filter_check_single_tag_neq"><span class="id" title="lemma">filter_check_single_tag_neq</span></a> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //. <span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> @<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">D</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hk</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htoks_dom</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#elem_of_list_to_set"><span class="id" title="lemma">elem_of_list_to_set</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk</span> |- * =&gt; <span class="id" title="var">Hk</span>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Main&nbsp;lemma&nbsp;for&nbsp;the&nbsp;second&nbsp;step&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">op</span></span>:&nbsp;linearization&nbsp;point&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.op_correct_lin" class="idref" href="#Wrap.op_correct_lin"><span class="id" title="lemma">op_correct_lin</span></a> <a id="f73da999b0d8ffa7e94367bb3a1fe991" class="idref" href="#f73da999b0d8ffa7e94367bb3a1fe991"><span class="id" title="binder">γ</span></a> <a id="eb603ab88679af1e5230f4c9352308d5" class="idref" href="#eb603ab88679af1e5230f4c9352308d5"><span class="id" title="binder">γi</span></a> <a id="2f2d3a003f09fd78e8a64ae17ee9a48a" class="idref" href="#2f2d3a003f09fd78e8a64ae17ee9a48a"><span class="id" title="binder">γs</span></a> <a id="ef8faebf08dd832301818021b6cce48e" class="idref" href="#ef8faebf08dd832301818021b6cce48e"><span class="id" title="binder">γe</span></a> <a id="s:209" class="idref" href="#s:209"><span class="id" title="binder">s</span></a> <a id="s':210" class="idref" href="#s':210"><span class="id" title="binder">s'</span></a> <a id="fbf379e2484909ebf5647f77fa85cadd" class="idref" href="#fbf379e2484909ebf5647f77fa85cadd"><span class="id" title="binder">γtag</span></a> <a id="v:212" class="idref" href="#v:212"><span class="id" title="binder">v</span></a> <a id="v':213" class="idref" href="#v':213"><span class="id" title="binder">v'</span></a> <a id="tag:214" class="idref" href="#tag:214"><span class="id" title="binder">tag</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="M:215" class="idref" href="#M:215"><span class="id" title="binder">M</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agree"><span class="id" title="record">agree</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>))) :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#M:215"><span class="id" title="variable">M</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:214"><span class="id" title="variable">tag</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> <a class="idref" href="intensional.examples.linearizability.html#fbf379e2484909ebf5647f77fa85cadd"><span class="id" title="variable">γtag</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#f"><span class="id" title="method">f</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:209"><span class="id" title="variable">s</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:212"><span class="id" title="variable">v</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':210"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#r"><span class="id" title="method">r</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:209"><span class="id" title="variable">s</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:212"><span class="id" title="variable">v</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':213"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#f73da999b0d8ffa7e94367bb3a1fe991"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#eb603ab88679af1e5230f4c9352308d5"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#2f2d3a003f09fd78e8a64ae17ee9a48a"><span class="id" title="variable">γs</span></a> <a class="idref" href="intensional.examples.linearizability.html#ef8faebf08dd832301818021b6cce48e"><span class="id" title="variable">γe</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:209"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#ef8faebf08dd832301818021b6cce48e"><span class="id" title="variable">γe</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">◯</span></a> <a class="idref" href="intensional.examples.linearizability.html#M:215"><span class="id" title="variable">M</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#2f2d3a003f09fd78e8a64ae17ee9a48a"><span class="id" title="variable">γs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#s:209"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#fbf379e2484909ebf5647f77fa85cadd"><span class="id" title="variable">γtag</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterCall"><span class="id" title="constructor">AfterCall</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:212"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#978156496a632d1434132892b1e662aa"><span class="id" title="notation">==∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#f73da999b0d8ffa7e94367bb3a1fe991"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#eb603ab88679af1e5230f4c9352308d5"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#2f2d3a003f09fd78e8a64ae17ee9a48a"><span class="id" title="variable">γs</span></a> <a class="idref" href="intensional.examples.linearizability.html#ef8faebf08dd832301818021b6cce48e"><span class="id" title="variable">γe</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':210"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#2f2d3a003f09fd78e8a64ae17ee9a48a"><span class="id" title="variable">γs</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#s':210"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#fbf379e2484909ebf5647f77fa85cadd"><span class="id" title="variable">γtag</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterLin"><span class="id" title="constructor">AfterLin</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:212"><span class="id" title="variable">v</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':213"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">):</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hm</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">Hv'</span>) "(HI &amp; HM &amp; HHf &amp; Htag)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HI" <span class="id" title="keyword">as</span> "(HHa &amp; Hγa &amp; HI)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HI" <span class="id" title="keyword">as</span> (<span class="id" title="var">β'</span> <span class="id" title="var">tokens''</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;"(% &amp; % &amp; % &amp; Ht &amp; Hγea &amp; Hγef' &amp; Htoks_dom &amp; Htoks)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Htoks_dom" <span class="id" title="keyword">as</span> %<span class="id" title="var">Htoks_dom'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.iris_extra.html#excl_auth_upd"><span class="id" title="lemma">excl_auth_upd</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">s'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HHf HHa"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "&gt;[HHf HHa]".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state_lookup_sub"><span class="id" title="lemma">tags_state_lookup_sub</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tag</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HM Hγea Htoks"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:217" class="idref" href="#v:217"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#check_tag"><span class="id" title="definition">check_tag</span></a> <span class="id" title="var">tag</span> <a class="idref" href="intensional.examples.linearizability.html#v:216"><span class="id" title="variable">v</span></a>) <span class="id" title="var">β'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">tag</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> %<span class="id" title="var">Hprevtag</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_lookup"><span class="id" title="lemma">big_sepM_lookup</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tag</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Htoks"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (? ? ?) "(Hts &amp; Htok)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>. <span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.iris_extra.html#excl_auth_eq"><span class="id" title="lemma">excl_auth_eq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Htag Hts"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %&lt;-. <span class="id" title="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state_call_to_lin"><span class="id" title="lemma">tags_state_call_to_lin</span></a> <span class="id" title="var">_</span> <span class="id" title="var">v'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$Htag $Htoks]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "&gt;[Htag Htoks]". <span class="id" title="var">done</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="var">β'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">tag</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>), <span class="id" title="var">tokens''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a>; <span class="id" title="tactic">eapply</span> <a class="idref" href="intensional.examples.linearizability.html#linearized_sound_lin"><span class="id" title="constructor">linearized_sound_lin</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized_add_lin"><span class="id" title="lemma">per_tag_linearized_add_lin</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Main&nbsp;lemma&nbsp;for&nbsp;the&nbsp;last&nbsp;step&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">op</span></span>&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.op_correct_ret" class="idref" href="#Wrap.op_correct_ret"><span class="id" title="lemma">op_correct_ret</span></a> <a id="bd0ca12c6d280ac854a03f86076f371b" class="idref" href="#bd0ca12c6d280ac854a03f86076f371b"><span class="id" title="binder">γ</span></a> <a id="bce24815efae32af45c1cea25ed403f0" class="idref" href="#bce24815efae32af45c1cea25ed403f0"><span class="id" title="binder">γi</span></a> <a id="ae232968c9b920067fc4aa302175cc22" class="idref" href="#ae232968c9b920067fc4aa302175cc22"><span class="id" title="binder">γs</span></a> <a id="51db623d397a111050562a5acea00009" class="idref" href="#51db623d397a111050562a5acea00009"><span class="id" title="binder">γe</span></a> <a id="s:222" class="idref" href="#s:222"><span class="id" title="binder">s</span></a> <a id="s':223" class="idref" href="#s':223"><span class="id" title="binder">s'</span></a> <a id="v:224" class="idref" href="#v:224"><span class="id" title="binder">v</span></a> <a id="v':225" class="idref" href="#v':225"><span class="id" title="binder">v'</span></a> (<a id="tag:226" class="idref" href="#tag:226"><span class="id" title="binder">tag</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <a id="0b94a75612f9c29daab06a37ea8a3675" class="idref" href="#0b94a75612f9c29daab06a37ea8a3675"><span class="id" title="binder">γtag</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="M:228" class="idref" href="#M:228"><span class="id" title="binder">M</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gmap"><span class="id" title="record">gmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#agree"><span class="id" title="record">agree</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span>))) :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#M:228"><span class="id" title="variable">M</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="intensional.examples.linearizability.html#tag:226"><span class="id" title="variable">tag</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.agree.html#to_agree"><span class="id" title="definition">to_agree</span></a> <a class="idref" href="intensional.examples.linearizability.html#0b94a75612f9c29daab06a37ea8a3675"><span class="id" title="variable">γtag</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#r"><span class="id" title="method">r</span></a> <a class="idref" href="intensional.examples.linearizability.html#s:222"><span class="id" title="variable">s</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:224"><span class="id" title="variable">v</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':225"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#bd0ca12c6d280ac854a03f86076f371b"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#bce24815efae32af45c1cea25ed403f0"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#ae232968c9b920067fc4aa302175cc22"><span class="id" title="variable">γs</span></a> <a class="idref" href="intensional.examples.linearizability.html#51db623d397a111050562a5acea00009"><span class="id" title="variable">γe</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':223"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#51db623d397a111050562a5acea00009"><span class="id" title="variable">γe</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.auth.html#a90cdbbdd48c6371236cd642d46fd3ac"><span class="id" title="notation">◯</span></a> <a class="idref" href="intensional.examples.linearizability.html#M:228"><span class="id" title="variable">M</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#own"><span class="id" title="definition">own</span></a> <a class="idref" href="intensional.examples.linearizability.html#0b94a75612f9c29daab06a37ea8a3675"><span class="id" title="variable">γtag</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">◯</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.AfterLin"><span class="id" title="constructor">AfterLin</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:224"><span class="id" title="variable">v</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':225"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.algebra.lib.excl_auth.html#e627ac72e6e86605e4aa3dae6fd0b604"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="69e63fc81d94da7d35721e758992ce42" class="idref" href="#69e63fc81d94da7d35721e758992ce42"><span class="id" title="binder">α</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.lifting.html#trace_is"><span class="id" title="definition">trace_is</span></a> <a class="idref" href="intensional.examples.linearizability.html#69e63fc81d94da7d35721e758992ce42"><span class="id" title="variable">α</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a> (<a class="idref" href="intensional.examples.linearizability.html#69e63fc81d94da7d35721e758992ce42"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:226"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:224"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':225"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.lifting.html#trace_is"><span class="id" title="definition">trace_is</span></a> (<a class="idref" href="intensional.examples.linearizability.html#69e63fc81d94da7d35721e758992ce42"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.examples.linearizability.html#tag:226"><span class="id" title="variable">tag</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#v:224"><span class="id" title="variable">v</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#v':225"><span class="id" title="variable">v'</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#04b855eff9d58bf18fcc1fd1ead61e24"><span class="id" title="notation">==∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv"><span class="id" title="definition">main_inv</span></a> <a class="idref" href="intensional.examples.linearizability.html#bd0ca12c6d280ac854a03f86076f371b"><span class="id" title="variable">γ</span></a> <a class="idref" href="intensional.examples.linearizability.html#bce24815efae32af45c1cea25ed403f0"><span class="id" title="variable">γi</span></a> <a class="idref" href="intensional.examples.linearizability.html#ae232968c9b920067fc4aa302175cc22"><span class="id" title="variable">γs</span></a> <a class="idref" href="intensional.examples.linearizability.html#51db623d397a111050562a5acea00009"><span class="id" title="variable">γe</span></a> <a class="idref" href="intensional.examples.linearizability.html#s':223"><span class="id" title="variable">s'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">HNN'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? ?) "(HI &amp; HM &amp; Htag)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HI" <span class="id" title="keyword">as</span> "(? &amp; ? &amp; HI)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HI" <span class="id" title="keyword">as</span> (<span class="id" title="var">β''</span> <span class="id" title="var">M'</span>) "(% &amp; % &amp; % &amp; Ht &amp; Hγea &amp; Hγef' &amp; Hdom_res &amp; Hres)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hdom_res" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hdom_res</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state_lookup_sub"><span class="id" title="lemma">tags_state_lookup_sub</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tag</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HM Hγea Hres"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %<span class="id" title="var">HMtag</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#filter"><span class="id" title="definition">filter</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:231" class="idref" href="#v:231"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#check_tag"><span class="id" title="definition">check_tag</span></a> <span class="id" title="var">tag</span> <a class="idref" href="intensional.examples.linearizability.html#v:230"><span class="id" title="variable">v</span></a>) <span class="id" title="var">β''</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">tag</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"call"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">tag</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"lin"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> %<span class="id" title="var">Hprevtag'</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepM_lookup"><span class="id" title="lemma">big_sepM_lookup</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tag</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hres"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (? ? ?) "(Hts &amp; Hres)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>. <span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.iris_extra.html#excl_auth_eq"><span class="id" title="lemma">excl_auth_eq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Htag Hts"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %&lt;-. <span class="id" title="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "Ht". <span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">β''</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">tag</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="var">split_and</span>!.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized_add_ret"><span class="id" title="lemma">per_tag_linearized_add_ret</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. }<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Ht".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.tags_state_lin_to_ret"><span class="id" title="lemma">tags_state_lin_to_ret</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$Htag $Hres]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "&gt;Hres".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iExists</span> (<span class="id" title="var">β''</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><span class="id" title="var">tag</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a>"ret"<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)))</span></a>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>), <span class="id" title="var">M'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="intensional.examples.linearizability.html#per_tag_linearized_add_ret"><span class="id" title="lemma">per_tag_linearized_add_ret</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Ht". <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#filter_app"><span class="id" title="lemma">filter_app</span></a> <a class="idref" href="intensional.examples.trace_helpers.html#tags_app"><span class="id" title="lemma">tags_app</span></a> /= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#list_to_set_app_L"><span class="id" title="lemma">list_to_set_app_L</span></a> <span class="id" title="var">Hdom_res</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hdom_res</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> @<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.fin_map_dom.html#elem_of_dom_2"><span class="id" title="lemma">elem_of_dom_2</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">D</span>:=<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.gmap.html#gset"><span class="id" title="definition">gset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">HMtag</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.op_correct" class="idref" href="#Wrap.op_correct"><span class="id" title="lemma">op_correct</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#op_spec"><span class="id" title="definition">op_spec</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.R_impl"><span class="id" title="variable">R_impl</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.S.N"><span class="id" title="variable">N</span></a>) <a class="idref" href="intensional.examples.linearizability.html#Wrap.S.op_impl"><span class="id" title="variable">op_impl</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#op_spec"><span class="id" title="definition">op_spec</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.R"><span class="id" title="definition">R</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.S.N"><span class="id" title="variable">N</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.mainN"><span class="id" title="definition">mainN</span></a>) <a class="idref" href="intensional.examples.linearizability.html#Wrap.op"><span class="id" title="definition">op</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">HNN'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "spec" (<span class="id" title="var">γ</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) "His".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "His" <span class="id" title="keyword">as</span> (<span class="id" title="var">γi</span> <span class="id" title="var">γs</span> <span class="id" title="var">γe</span>) "(#HPimpl &amp; #? &amp; #HT)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (φ) "HAU".<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;first&nbsp;emit:&nbsp;call&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.op"><span class="id" title="definition">op</span></a>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_bind</span> (<a class="idref" href="intensional.heap_lang.lang.html#heap_lang.Fresh"><span class="id" title="constructor">Fresh</span></a> <span class="id" title="var">_</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#op_spec"><span class="id" title="definition">op_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iInv</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.mainN"><span class="id" title="definition">mainN</span></a> <span class="id" title="keyword">as</span> "&gt;Ht" "Hclose". <span class="id" title="var">iDestruct</span> "Ht" <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span>) "HI".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.op_correct_call"><span class="id" title="lemma">op_correct_call</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HI"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">α</span>) "(Ht &amp; % &amp; Hcont)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.lifting.html#wp_fresh"><span class="id" title="lemma">wp_fresh</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$Ht $HT]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="var">solve_ndisj</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iNext</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">tag</span>) "(Ht &amp; Hfresh)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hcont" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$Ht $Hfresh]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[HI HM]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HM" <span class="id" title="keyword">as</span> (<span class="id" title="var">M</span> <span class="id" title="var">γtag</span>) "(#HγM &amp; % &amp; Hγtag)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hclose" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[HI]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "_". <span class="id" title="tactic">by</span> <span class="id" title="var">iNext</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">clear</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;call&nbsp;to&nbsp;op_impl&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"spec" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">y</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "HPimpl"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>. <span class="id" title="var">awp_apply</span> "spec".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">iInv</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.mainN"><span class="id" title="definition">mainN</span></a> <span class="id" title="keyword">as</span> "&gt;HI" "Hclose". <span class="id" title="var">iDestruct</span> "HI" <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span>) "HI".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> "HAU" <span class="id" title="keyword">as</span> (<span class="id" title="var">_s</span>) "(HH &amp; Hnext)". <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HH" <span class="id" title="keyword">as</span> (<span class="id" title="var">γi'</span> <span class="id" title="var">γs'</span> <span class="id" title="var">γe'</span>) "(HHi &amp; HHf &amp; Hγf)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv_gnames_eq"><span class="id" title="lemma">main_inv_gnames_eq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hγf HI"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %?. <span class="id" title="var">destruct_and</span>!; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.main_inv_state_eq"><span class="id" title="lemma">main_inv_state_eq</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HHf HI"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> %?. <span class="id" title="var">simplify_eq</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "HHi".<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;abort&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HHi". <span class="id" title="var">iDestruct</span> "Hnext" <span class="id" title="keyword">as</span> "[Hnext _]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hnext" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[HHi HHf Hγf]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">γi</span>, <span class="id" title="var">γs</span>, <span class="id" title="var">γe</span>. <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Hnext". <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hclose" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[HI]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "_". <span class="id" title="tactic">by</span> <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span>. }<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;continue&nbsp;case:&nbsp;update&nbsp;the&nbsp;invariant&nbsp;with&nbsp;a&nbsp;lin&nbsp;"ghost"&nbsp;emit&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">s'</span> <span class="id" title="var">y'</span>) "[HHi [% %]]". <span class="id" title="var">iDestruct</span> "Hnext" <span class="id" title="keyword">as</span> "[_ Hnext]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.op_correct_lin"><span class="id" title="lemma">op_correct_lin</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$HI $HγM $HHf $Hγtag]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "(HI &amp; HHf &amp; Hγtag)". <span class="id" title="var">done</span>. <span class="id" title="var">done</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hnext" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[HHi HHf Hγf]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iSplitL</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iExists</span> <span class="id" title="var">γi</span>, <span class="id" title="var">γs</span>, <span class="id" title="var">γe</span>; <span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hclose" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[HI]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "_". <span class="id" title="tactic">by</span> <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;final&nbsp;emit:&nbsp;ret&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="var">wp_bind</span> (<a class="idref" href="intensional.heap_lang.lang.html#heap_lang.Emit"><span class="id" title="constructor">Emit</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">iInv</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.mainN"><span class="id" title="definition">mainN</span></a> <span class="id" title="keyword">as</span> "&gt;HI" "Hclose". <span class="id" title="var">iDestruct</span> "HI" <span class="id" title="keyword">as</span> (<span class="id" title="var">s''</span>) "HI".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.op_correct_ret"><span class="id" title="lemma">op_correct_ret</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$HI $HγM $Hγtag]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">α'</span>) "(Ht &amp; % &amp; Hcont)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.heap_lang.lifting.html#wp_emit"><span class="id" title="lemma">wp_emit</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$Ht $HT]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">solve_ndisj</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; Ht". <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hcont" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Ht"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HI".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hclose" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[HI]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">wp_pures</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.S"><span class="id" title="section">S</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Wrap.lib" class="idref" href="#Wrap.lib"><span class="id" title="definition">lib</span></a> (<a id="lib_impl:232" class="idref" href="#lib_impl:232"><span class="id" title="binder">lib_impl</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>): <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="intensional.examples.linearizability.html#lib_impl:232"><span class="id" title="variable">lib_impl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><span class="id" title="var">init_impl</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <span class="id" title="var">op_impl</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a>%<span class="id" title="var">V</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#Wrap.init"><span class="id" title="definition">init</span></a> <span class="id" title="var">init_impl</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#Wrap.op"><span class="id" title="definition">op</span></a> <span class="id" title="var">op_impl</span><a class="idref" href="intensional.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Wrap.correct" class="idref" href="#Wrap.correct"><span class="id" title="lemma">correct</span></a> `{<a id="H:235" class="idref" href="#H:235"><span class="id" title="binder">heapG</span></a> <a id="H:235" class="idref" href="#H:235"><span class="id" title="binder">Σ</span></a>, <a id="H0:236" class="idref" href="#H0:236"><span class="id" title="binder">model</span></a>, <a id="H2:238" class="idref" href="#H2:238"><span class="id" title="binder">linG</span></a> <a id="H2:238" class="idref" href="#H2:238"><span class="id" title="binder">Σ</span></a>} (<a id="N:239" class="idref" href="#N:239"><span class="id" title="binder">N</span></a> <a id="N':240" class="idref" href="#N':240"><span class="id" title="binder">N'</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#namespace"><span class="id" title="definition">namespace</span></a>) <a id="P0:241" class="idref" href="#P0:241"><span class="id" title="binder">P0</span></a> (<a id="lib_impl:242" class="idref" href="#lib_impl:242"><span class="id" title="binder">lib_impl</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#N:239"><span class="id" title="variable">N</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="intensional.examples.linearizability.html#N':240"><span class="id" title="variable">N'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#lib_spec"><span class="id" title="definition">lib_spec</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="intensional.examples.linearizability.html#N:239"><span class="id" title="variable">N</span></a>) <a class="idref" href="intensional.examples.linearizability.html#P0:241"><span class="id" title="variable">P0</span></a> <a class="idref" href="intensional.examples.linearizability.html#lib_impl:242"><span class="id" title="variable">lib_impl</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#lib_spec"><span class="id" title="definition">lib_spec</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="intensional.examples.linearizability.html#N:239"><span class="id" title="variable">N</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑(</span></a><a class="idref" href="intensional.examples.linearizability.html#N':240"><span class="id" title="variable">N'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a>"main"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="intensional.examples.linearizability.html#P0:241"><span class="id" title="variable">P0</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="intensional.heap_lang.lifting.html#trace_is"><span class="id" title="definition">trace_is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="intensional.heap_lang.lifting.html#trace_inv"><span class="id" title="definition">trace_inv</span></a> (<a class="idref" href="intensional.examples.linearizability.html#N':240"><span class="id" title="variable">N'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a>"trace") <a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="intensional.examples.linearizability.html#Wrap.lib"><span class="id" title="definition">lib</span></a> <a class="idref" href="intensional.examples.linearizability.html#lib_impl:242"><span class="id" title="variable">lib_impl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HNN'</span>) "S". <span class="id" title="var">iDestruct</span> "S" <span class="id" title="keyword">as</span> (<span class="id" title="var">R_impl</span>) "S".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iDestruct</span> "S" <span class="id" title="keyword">as</span> "(Hinit &amp; Hop)".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="intensional.examples.linearizability.html#lib_spec"><span class="id" title="definition">lib_spec</span></a>. <span class="id" title="var">iExists</span> (<a class="idref" href="intensional.examples.linearizability.html#Wrap.R"><span class="id" title="definition">Wrap.R</span></a> <span class="id" title="var">N'</span> <span class="id" title="var">R_impl</span>). <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.init_correct"><span class="id" title="lemma">init_correct</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap.op_correct"><span class="id" title="lemma">op_correct</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="intensional.examples.linearizability.html#Wrap"><span class="id" title="module">Wrap</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab31"></a><h3 class="section">Adequacy</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="libN" class="idref" href="#libN"><span class="id" title="definition">libN</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#nroot"><span class="id" title="definition">nroot</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a> "lib".<br/>
<span class="id" title="keyword">Definition</span> <a id="wrapN" class="idref" href="#wrapN"><span class="id" title="definition">wrapN</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#nroot"><span class="id" title="definition">nroot</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a> "wrap".<br/>
<span class="id" title="keyword">Definition</span> <a id="empty_state" class="idref" href="#empty_state"><span class="id" title="definition">empty_state</span></a> : <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.state"><span class="id" title="record">state</span></a> := <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.Build_state"><span class="id" title="constructor">Build_state</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>.<br/>

<br/>
</div>

<div class="doc">
At every step of the execution, the trace from the operational semantics is
    <span class="inlinecode"><a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wrap_lib_correct" class="idref" href="#wrap_lib_correct"><span class="id" title="lemma">wrap_lib_correct</span></a> `{<a id="H:243" class="idref" href="#H:243"><span class="id" title="binder">model</span></a>} (<a id="e:244" class="idref" href="#e:244"><span class="id" title="binder">e</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.expr"><span class="id" title="inductive">expr</span></a>) (<a id="lib:245" class="idref" href="#lib:245"><span class="id" title="binder">lib</span></a>: <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">`(</span></a><a id="H0:255" class="idref" href="#H0:255"><span class="id" title="binder">heapG</span></a> <a id="H0:255" class="idref" href="#H0:255"><span class="id" title="binder">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="intensional.examples.linearizability.html#lib_spec"><span class="id" title="definition">lib_spec</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="intensional.examples.linearizability.html#libN"><span class="id" title="definition">libN</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="intensional.examples.linearizability.html#lib:245"><span class="id" title="variable">lib</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">`(</span></a><a id="H0:249" class="idref" href="#H0:249"><span class="id" title="binder">heapG</span></a> <a id="H0:249" class="idref" href="#H0:249"><span class="id" title="binder">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="P:250" class="idref" href="#P:250"><span class="id" title="binder">P</span></a> <a id="E:251" class="idref" href="#E:251"><span class="id" title="binder">E</span></a> <a id="lib:252" class="idref" href="#lib:252"><span class="id" title="binder">lib</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#lib_spec"><span class="id" title="definition">lib_spec</span></a> <a class="idref" href="intensional.examples.linearizability.html#E:251"><span class="id" title="variable">E</span></a> <a class="idref" href="intensional.examples.linearizability.html#P:250"><span class="id" title="variable">P</span></a> <a class="idref" href="intensional.examples.linearizability.html#lib:252"><span class="id" title="variable">lib</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a> <a class="idref" href="intensional.examples.linearizability.html#P:250"><span class="id" title="variable">P</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a> <a class="idref" href="intensional.examples.linearizability.html#e:244"><span class="id" title="variable">e</span></a> <a class="idref" href="intensional.examples.linearizability.html#lib:252"><span class="id" title="variable">lib</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">{{{</span></a> <a id="v:253" class="idref" href="#v:253"><span class="id" title="binder">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">RET</span></a> <a class="idref" href="intensional.examples.linearizability.html#v:253"><span class="id" title="variable">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.weakestpre.html#0993f0cae7df37fdc909fad0b1a3747b"><span class="id" title="notation">}}}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="0e7ebb11aa51c17d6ec0b2b348bd266c" class="idref" href="#0e7ebb11aa51c17d6ec0b2b348bd266c"><span class="id" title="binder">σ'</span></a> <a id="e':247" class="idref" href="#e':247"><span class="id" title="binder">e'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>(<a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a><a class="idref" href="intensional.heap_lang.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a> <a class="idref" href="intensional.examples.linearizability.html#e:244"><span class="id" title="variable">e</span></a> (<a class="idref" href="intensional.examples.linearizability.html#lib"><span class="id" title="definition">Wrap.lib</span></a> <a class="idref" href="intensional.examples.linearizability.html#lib:245"><span class="id" title="variable">lib</span></a>))%<span class="id" title="var">E</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#empty_state"><span class="id" title="definition">empty_state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="intensional.examples.linearizability.html#e':247"><span class="id" title="variable">e'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="intensional.examples.linearizability.html#0e7ebb11aa51c17d6ec0b2b348bd266c"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a> (<a class="idref" href="intensional.heap_lang.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a> <a class="idref" href="intensional.examples.linearizability.html#0e7ebb11aa51c17d6ec0b2b348bd266c"><span class="id" title="variable">σ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σ</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">#[</span></a><a class="idref" href="intensional.examples.linearizability.html#27f7d06d40b9db4ba63ab90e77b372ae"><span class="id" title="definition">Wrap.linΣ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.wsat.html#c22f0c17de9d24122822604d97140433"><span class="id" title="definition">invΣ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.gen_heap.html#c31aa0e97544fe574310f89b0832e58f"><span class="id" title="definition">gen_heapΣ</span></a> <a class="idref" href="intensional.heap_lang.locations.html#loc"><span class="id" title="record">loc</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">;</span></a> <a class="idref" href="intensional.heap_lang.lifting.html#b181a4fc8c4bbb0b4a63cbb7e54f9b33"><span class="id" title="definition">traceΣ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.proph_map.html#c79d995c97f617a446aedba2a47a32a3"><span class="id" title="definition">proph_mapΣ</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.proph_id"><span class="id" title="definition">proph_id</span></a> (<a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="intensional.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#8ed86267cb76025deed5ef60f2c33991"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlib</span> <span class="id" title="var">Hctx</span> σ' <span class="id" title="var">e'</span> <span class="id" title="var">Hsteps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (@<a class="idref" href="intensional.heap_lang.adequacy.html#module_invariance"><span class="id" title="lemma">module_invariance</span></a> <span class="id" title="var">Σ</span> (<a class="idref" href="intensional.heap_lang.adequacy.html#HeapPreG"><span class="id" title="constructor">HeapPreG</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="intensional.examples.linearizability.html#wrapN"><span class="id" title="definition">wrapN</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a>"trace") (@<a class="idref" href="intensional.examples.linearizability.html#lib_spec"><span class="id" title="definition">lib_spec</span></a> <span class="id" title="var">_</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="intensional.examples.linearizability.html#libN"><span class="id" title="definition">libN</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑(</span></a><a class="idref" href="intensional.examples.linearizability.html#wrapN"><span class="id" title="definition">wrapN</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a>"main"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">)</span></a>) <span class="id" title="var">Σ</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'True'"><span class="id" title="notation">True</span></a> <span class="id" title="var">e</span> <a class="idref" href="intensional.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="intensional.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="intensional.examples.linearizability.html#lib"><span class="id" title="definition">Wrap.lib</span></a> <span class="id" title="var">lib</span>) <a class="idref" href="intensional.examples.linearizability.html#linearizable"><span class="id" title="definition">linearizable</span></a> <a class="idref" href="intensional.examples.linearizability.html#empty_state"><span class="id" title="definition">empty_state</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="intensional.examples.linearizability.html#linearizable_nil"><span class="id" title="lemma">linearizable_nil</span></a>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (? ? ?) "?". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="var">Hctx</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (? <span class="id" title="var">_</span>) "!&gt;". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.program_logic.weakestpre.html#wp_value"><span class="id" title="lemma">wp_value</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> (?). <span class="id" title="var">iApply</span> <a class="idref" href="intensional.examples.linearizability.html#correct"><span class="id" title="lemma">Wrap.correct</span></a>. <span class="id" title="var">solve_ndisj</span>. <span class="id" title="var">iApply</span> <span class="id" title="var">Hlib</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
